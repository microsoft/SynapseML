(self.webpackChunksynapseml=self.webpackChunksynapseml||[]).push([[8322],{3905:function(e,t,a){"use strict";a.d(t,{Zo:function(){return m},kt:function(){return y}});var n=a(7294);function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function r(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}var i=n.createContext({}),c=function(e){var t=n.useContext(i),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},m=function(e){var t=c(e.components);return n.createElement(i.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,s=e.mdxType,o=e.originalType,i=e.parentName,m=r(e,["components","mdxType","originalType","parentName"]),u=c(a),y=s,d=u["".concat(i,".").concat(y)]||u[y]||p[y]||o;return a?n.createElement(d,l(l({ref:t},m),{},{components:a})):n.createElement(d,l({ref:t},m))}));function y(e,t){var a=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var o=a.length,l=new Array(o);l[0]=u;var r={};for(var i in t)hasOwnProperty.call(t,i)&&(r[i]=t[i]);r.originalType=e,r.mdxType="string"==typeof e?e:s,l[1]=r;for(var c=2;c<o;c++)l[c]=a[c];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},1332:function(e,t,a){"use strict";var n=a(7294);t.Z=function(e){var t=e.children,a=e.hidden,s=e.className;return n.createElement("div",{role:"tabpanel",hidden:a,className:s},t)}},5386:function(e,t,a){"use strict";a.d(t,{Z:function(){return u}});var n=a(4034),s=a(7294),o=a(2389),l=a(8578);var r=function(){var e=(0,s.useContext)(l.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},i=a(9558),c=a(6010),m="tabItem_2kG2";function p(e){var t,a,n,o=e.lazy,l=e.block,p=e.defaultValue,u=e.values,y=e.groupId,d=e.className,g=s.Children.map(e.children,(function(e){if((0,s.isValidElement)(e)&&"string"==typeof e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),v=null!=u?u:g.map((function(e){var t=e.props;return{value:t.value,label:t.label}})),f=(0,i.lx)(v,(function(e,t){return e.value===t.value}));if(f.length>0)throw new Error('Docusaurus error: Duplicate values "'+f.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var b=null===p?p:null!=(t=null!=p?p:null==(a=g.find((function(e){return e.props.default})))?void 0:a.props.value)?t:null==(n=g[0])?void 0:n.props.value;if(null!==b&&!v.some((function(e){return e.value===b})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+b+'" but none of its children has the corresponding value. Available values are: '+v.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var k=r(),T=k.tabGroupChoices,h=k.setTabGroupChoices,I=(0,s.useState)(b),S=I[0],C=I[1],x=[],N=(0,i.o5)().blockElementScrollPositionUntilNextRender;if(null!=y){var D=T[y];null!=D&&D!==S&&v.some((function(e){return e.value===D}))&&C(D)}var K=function(e){var t=e.currentTarget,a=x.indexOf(t),n=v[a].value;n!==S&&(N(t),C(n),null!=y&&h(y,n))},w=function(e){var t,a=null;switch(e.key){case"ArrowRight":var n=x.indexOf(e.currentTarget)+1;a=x[n]||x[0];break;case"ArrowLeft":var s=x.indexOf(e.currentTarget)-1;a=x[s]||x[x.length-1]}null==(t=a)||t.focus()};return s.createElement("div",{className:"tabs-container"},s.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,c.Z)("tabs",{"tabs--block":l},d)},v.map((function(e){var t=e.value,a=e.label;return s.createElement("li",{role:"tab",tabIndex:S===t?0:-1,"aria-selected":S===t,className:(0,c.Z)("tabs__item",m,{"tabs__item--active":S===t}),key:t,ref:function(e){return x.push(e)},onKeyDown:w,onFocus:K,onClick:K},null!=a?a:t)}))),o?(0,s.cloneElement)(g.filter((function(e){return e.props.value===S}))[0],{className:"margin-vert--md"}):s.createElement("div",{className:"margin-vert--md"},g.map((function(e,t){return(0,s.cloneElement)(e,{key:t,hidden:e.props.value!==S})}))))}function u(e){var t=(0,o.Z)();return s.createElement(p,(0,n.Z)({key:String(t)},e))}},8578:function(e,t,a){"use strict";var n=(0,a(7294).createContext)(void 0);t.Z=n},1989:function(e,t,a){"use strict";var n=a(7294),s=a(2263);t.Z=function(e){var t=e.className,a=e.py,o=e.scala,l=e.sourceLink,r=(0,s.Z)().siteConfig.customFields.version,i="https://mmlspark.blob.core.windows.net/docs/"+r+"/pyspark/"+a,c="https://mmlspark.blob.core.windows.net/docs/"+r+"/scala/"+o;return n.createElement("table",null,n.createElement("tbody",null,n.createElement("tr",null,n.createElement("td",null,n.createElement("strong",null,"Python API: "),n.createElement("a",{href:i},t)),n.createElement("td",null,n.createElement("strong",null,"Scala API: "),n.createElement("a",{href:c},t)),n.createElement("td",null,n.createElement("strong",null,"Source: "),n.createElement("a",{href:l},t)))))}},7223:function(e,t,a){"use strict";a.r(t),a.d(t,{contentTitle:function(){return q},default:function(){return W},frontMatter:function(){return B},metadata:function(){return H},toc:function(){return X}});var n=a(4034),s=a(9973),o=(a(7294),a(3905)),l=a(5386),r=a(1332),i=a(1989),c=["components"],m=[{value:"Text Analytics",id:"text-analytics",children:[{value:"EntityDetector",id:"entitydetector",children:[],level:3},{value:"KeyPhraseExtractor",id:"keyphraseextractor",children:[],level:3},{value:"LanguageDetector",id:"languagedetector",children:[],level:3},{value:"NER",id:"ner",children:[],level:3},{value:"PII",id:"pii",children:[],level:3},{value:"TextSentiment",id:"textsentiment",children:[],level:3}],level:2}],p={toc:m};function u(e){var t=e.components,a=(0,s.Z)(e,c);return(0,o.kt)("wrapper",(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"text-analytics"},"Text Analytics"),(0,o.kt)("h3",{id:"entitydetector"},"EntityDetector"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ntextKey = os.environ.get("COGNITIVE_API_KEY", getSecret("cognitive-api-key"))\ndf = spark.createDataFrame([\n    ("1", "Microsoft released Windows 10"),\n    ("2", "In 1975, Bill Gates III and Paul Allen founded the company.")\n], ["id", "text"])\n\nentity = (EntityDetector()\n      .setSubscriptionKey(textKey)\n      .setLocation("eastus")\n      .setLanguage("en")\n      .setOutputCol("replies")\n      .setErrorCol("error"))\n\ndisplay(entity.transform(df))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\nimport org.apache.spark.sql.functions.{col, flatten}\n\nval textKey = sys.env.getOrElse("COGNITIVE_API_KEY", None)\nval df = Seq(\n    ("1", "Microsoft released Windows 10"),\n    ("2", "In 1975, Bill Gates III and Paul Allen founded the company.")\n  ).toDF("id", "text")\n\nval entity = (new EntityDetector()\n            .setSubscriptionKey(textKey)\n            .setLocation("eastus")\n            .setLanguage("en")\n            .setOutputCol("replies"))\n\ndisplay(entity.transform(df))\n')))),(0,o.kt)(i.Z,{className:"EntityDetector",py:"mmlspark.cognitive.html#module-mmlspark.cognitive.EntityDetector",scala:"com/microsoft/azure/synapse/ml/cognitive/EntityDetector.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/TextAnalytics.scala",mdxType:"DocTable"}),(0,o.kt)("h3",{id:"keyphraseextractor"},"KeyPhraseExtractor"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ntextKey = os.environ.get("COGNITIVE_API_KEY", getSecret("cognitive-api-key"))\ndf = spark.createDataFrame([\n    ("en", "Hello world. This is some input text that I love."),\n    ("fr", "Bonjour tout le monde"),\n    ("es", "La carretera estaba atascada. Hab\xeda mucho tr\xe1fico el d\xeda de ayer.")\n], ["lang", "text"])\n\nkeyPhrase = (KeyPhraseExtractor()\n            .setSubscriptionKey(textKey)\n            .setLocation("eastus")\n            .setLanguageCol("lang")\n            .setOutputCol("replies")\n            .setErrorCol("error"))\n\ndisplay(keyPhrase.transform(df))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\n\nval textKey = sys.env.getOrElse("COGNITIVE_API_KEY", None)\nval df = Seq(\n    ("en", "Hello world. This is some input text that I love."),\n    ("fr", "Bonjour tout le monde"),\n    ("es", "La carretera estaba atascada. Hab\xeda mucho tr\xe1fico el d\xeda de ayer."),\n    ("en", null)\n  ).toDF("lang", "text")\n\nval keyPhrase = (new KeyPhraseExtractor()\n                  .setSubscriptionKey(textKey)\n                  .setLocation("eastus")\n                  .setLanguageCol("lang")\n                  .setOutputCol("replies"))\n\ndisplay(keyPhrase.transform(df))\n')))),(0,o.kt)(i.Z,{className:"KeyPhraseExtractor",py:"mmlspark.cognitive.html#module-mmlspark.cognitive.KeyPhraseExtractor",scala:"com/microsoft/azure/synapse/ml/cognitive/KeyPhraseExtractor.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/TextAnalytics.scala",mdxType:"DocTable"}),(0,o.kt)("h3",{id:"languagedetector"},"LanguageDetector"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ntextKey = os.environ.get("COGNITIVE_API_KEY", getSecret("cognitive-api-key"))\ndf = spark.createDataFrame([\n  ("Hello World",),\n  ("Bonjour tout le monde",),\n  ("La carretera estaba atascada. Hab\xeda mucho tr\xe1fico el d\xeda de ayer.",),\n  ("\u4f60\u597d",),\n  ("\u3053\u3093\u306b\u3061\u306f",),\n  (":) :( :D",)\n], ["text",])\n\nlanguage = (LanguageDetector()\n            .setSubscriptionKey(textKey)\n            .setLocation("eastus")\n            .setTextCol("text")\n            .setOutputCol("language")\n            .setErrorCol("error"))\n\ndisplay(language.transform(df))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\n\nval textKey = sys.env.getOrElse("COGNITIVE_API_KEY", None)\nval df = Seq(\n    "Hello World",\n    "Bonjour tout le monde",\n    "La carretera estaba atascada. Hab\xeda mucho tr\xe1fico el d\xeda de ayer.",\n    ":) :( :D"\n  ).toDF("text")\n\nval language = (new LanguageDetector()\n      .setSubscriptionKey(textKey)\n      .setLocation("eastus")\n      .setOutputCol("replies"))\n\ndisplay(language.transform(df))\n')))),(0,o.kt)(i.Z,{className:"LanguageDetector",py:"mmlspark.cognitive.html#module-mmlspark.cognitive.LanguageDetector",scala:"com/microsoft/azure/synapse/ml/cognitive/LanguageDetector.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/TextAnalytics.scala",mdxType:"DocTable"}),(0,o.kt)("h3",{id:"ner"},"NER"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ntextKey = os.environ.get("COGNITIVE_API_KEY", getSecret("cognitive-api-key"))\ndf = spark.createDataFrame([\n    ("1", "en", "I had a wonderful trip to Seattle last week."),\n    ("2", "en", "I visited Space Needle 2 times.")\n], ["id", "language", "text"])\n\nner = (NER()\n      .setSubscriptionKey(textKey)\n      .setLocation("eastus")\n      .setLanguageCol("language")\n      .setOutputCol("replies")\n      .setErrorCol("error"))\n\ndisplay(ner.transform(df)\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\n\nval textKey = sys.env.getOrElse("COGNITIVE_API_KEY", None)\nval df = Seq(\n    ("1", "en", "I had a wonderful trip to Seattle last week."),\n    ("2", "en", "I visited Space Needle 2 times.")\n  ).toDF("id", "language", "text")\n\nval ner = (new NER()\n            .setSubscriptionKey(textKey)\n            .setLocation("eastus")\n            .setLanguage("en")\n            .setOutputCol("response"))\n\ndisplay(ner.transform(df)\n')))),(0,o.kt)(i.Z,{className:"NER",py:"mmlspark.cognitive.html#module-mmlspark.cognitive.NER",scala:"com/microsoft/azure/synapse/ml/cognitive/NER.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/TextAnalytics.scala",mdxType:"DocTable"}),(0,o.kt)("h3",{id:"pii"},"PII"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ntextKey = os.environ.get("COGNITIVE_API_KEY", getSecret("cognitive-api-key"))\ndf = spark.createDataFrame([\n    ("1", "en", "My SSN is 859-98-0987"),\n    ("2", "en",\n      "Your ABA number - 111000025 - is the first 9 digits in the lower left hand corner of your personal check."),\n    ("3", "en", "Is 998.214.865-68 your Brazilian CPF number?")\n], ["id", "language", "text"])\n\npii = (PII()\n      .setSubscriptionKey(textKey)\n      .setLocation("eastus")\n      .setLanguage("en")\n      .setOutputCol("response")\n\ndisplay(pii.transform(df))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\n\nval textKey = sys.env.getOrElse("COGNITIVE_API_KEY", None)\nval df = Seq(\n    ("1", "en", "My SSN is 859-98-0987"),\n    ("2", "en",\n      "Your ABA number - 111000025 - is the first 9 digits in the lower left hand corner of your personal check."),\n    ("3", "en", "Is 998.214.865-68 your Brazilian CPF number?")\n  ).toDF("id", "language", "text")\n\nval pii = (new PII()\n            .setSubscriptionKey(textKey)\n            .setLocation("eastus")\n            .setLanguage("en")\n            .setOutputCol("response"))\n\ndisplay(pii.transform(df))\n')))),(0,o.kt)(i.Z,{className:"PII",py:"mmlspark.cognitive.html#module-mmlspark.cognitive.TextSentiment",scala:"com/microsoft/azure/synapse/ml/cognitive/TextSentiment.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/TextAnalytics.scala",mdxType:"DocTable"}),(0,o.kt)("h3",{id:"textsentiment"},"TextSentiment"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ntextKey = os.environ.get("COGNITIVE_API_KEY", getSecret("cognitive-api-key"))\ndf = spark.createDataFrame([\n  ("I am so happy today, its sunny!", "en-US"),\n  ("I am frustrated by this rush hour traffic", "en-US"),\n  ("The cognitive services on spark aint bad", "en-US"),\n], ["text", "language"])\n\nsentiment = (TextSentiment()\n            .setSubscriptionKey(textKey)\n            .setLocation("eastus")\n            .setTextCol("text")\n            .setOutputCol("sentiment")\n            .setErrorCol("error")\n            .setLanguageCol("language"))\n\ndisplay(sentiment.transform(df))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\n\nval textKey = sys.env.getOrElse("COGNITIVE_API_KEY", None)\nval df = Seq(\n    ("en", "Hello world. This is some input text that I love."),\n    ("fr", "Bonjour tout le monde"),\n    ("es", "La carretera estaba atascada. Hab\xeda mucho tr\xe1fico el d\xeda de ayer."),\n    (null, "ich bin ein berliner"),\n    (null, null),\n    ("en", null)\n  ).toDF("lang", "text")\n\nval sentiment = (new TextSentiment()\n            .setSubscriptionKey(textKey)\n            .setLocation("eastus")\n            .setLanguageCol("lang")\n            .setModelVersion("latest")\n            .setShowStats(true)\n            .setOutputCol("replies"))\n\ndisplay(sentiment.transform(df))\n')))),(0,o.kt)(i.Z,{className:"TextSentiment",py:"mmlspark.cognitive.html#module-mmlspark.cognitive.TextSentiment",scala:"com/microsoft/azure/synapse/ml/cognitive/TextSentiment.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/TextAnalytics.scala",mdxType:"DocTable"}))}u.isMDXComponent=!0;var y=["components"],d=[{value:"Translator",id:"translator",children:[{value:"Translate",id:"translate",children:[],level:3},{value:"Transliterate",id:"transliterate",children:[],level:3},{value:"Detect",id:"detect",children:[],level:3},{value:"BreakSentence",id:"breaksentence",children:[],level:3},{value:"DictionaryLookup",id:"dictionarylookup",children:[],level:3},{value:"DictionaryExamples",id:"dictionaryexamples",children:[],level:3},{value:"DocumentTranslator",id:"documenttranslator",children:[],level:3}],level:2}],g={toc:d};function v(e){var t=e.components,a=(0,s.Z)(e,y);return(0,o.kt)("wrapper",(0,n.Z)({},g,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"translator"},"Translator"),(0,o.kt)("h3",{id:"translate"},"Translate"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ntranslatorKey = os.environ.get("TRANSLATOR_KEY", getSecret("translator-key"))\ndf = spark.createDataFrame([\n  (["Hello, what is your name?", "Bye"],)\n], ["text",])\n\ntranslate = (Translate()\n            .setSubscriptionKey(translatorKey)\n            .setLocation("eastus")\n            .setTextCol("text")\n            .setToLanguage(["zh-Hans", "fr"])\n            .setOutputCol("translation")\n            .setConcurrency(5))\n\ndisplay(translate\n      .transform(df)\n      .withColumn("translation", flatten(col("translation.translations")))\n      .withColumn("translation", col("translation.text"))\n      .select("translation"))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\nimport org.apache.spark.sql.functions.{col, flatten}\n\nval translatorKey = sys.env.getOrElse("TRANSLATOR_KEY", None)\nval df = Seq(List("Hello, what is your name?", "Bye")).toDF("text")\n\nval translate = (new Translate()\n                  .setSubscriptionKey(translatorKey)\n                  .setLocation("eastus")\n                  .setTextCol("text")\n                  .setToLanguage(Seq("zh-Hans", "fr"))\n                  .setOutputCol("translation")\n                  .setConcurrency(5))\n\ndisplay(translate\n      .transform(df)\n      .withColumn("translation", flatten(col("translation.translations")))\n      .withColumn("translation", col("translation.text"))\n      .select("translation"))\n')))),(0,o.kt)(i.Z,{className:"Translate",py:"mmlspark.cognitive.html#module-mmlspark.cognitive.Translate",scala:"com/microsoft/azure/synapse/ml/cognitive/Translate.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/TextTranslator.scala",mdxType:"DocTable"}),(0,o.kt)("h3",{id:"transliterate"},"Transliterate"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ntranslatorKey = os.environ.get("TRANSLATOR_KEY", getSecret("translator-key"))\ndf =  spark.createDataFrame([\n  (["\u3053\u3093\u306b\u3061\u306f", "\u3055\u3088\u3046\u306a\u3089"],)\n], ["text",])\n\ntransliterate = (Transliterate()\n            .setSubscriptionKey(translatorKey)\n            .setLocation("eastus")\n            .setLanguage("ja")\n            .setFromScript("Jpan")\n            .setToScript("Latn")\n            .setTextCol("text")\n            .setOutputCol("result"))\n\ndisplay(transliterate\n    .transform(df)\n    .withColumn("text", col("result.text"))\n    .withColumn("script", col("result.script"))\n    .select("text", "script"))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\nimport org.apache.spark.sql.functions.col\n\nval translatorKey = sys.env.getOrElse("TRANSLATOR_KEY", None)\nval df = Seq(List("\u3053\u3093\u306b\u3061\u306f", "\u3055\u3088\u3046\u306a\u3089")).toDF("text")\n\nval transliterate = (new Transliterate()\n                        .setSubscriptionKey(translatorKey)\n                        .setLocation("eastus")\n                        .setLanguage("ja")\n                        .setFromScript("Jpan")\n                        .setToScript("Latn")\n                        .setTextCol("text")\n                        .setOutputCol("result"))\n\ndisplay(transliterate\n    .transform(df)\n    .withColumn("text", col("result.text"))\n    .withColumn("script", col("result.script"))\n    .select("text", "script"))\n')))),(0,o.kt)(i.Z,{className:"Transliterate",py:"mmlspark.cognitive.html#module-mmlspark.cognitive.Transliterate",scala:"com/microsoft/azure/synapse/ml/cognitive/Transliterate.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/TextTranslator.scala",mdxType:"DocTable"}),(0,o.kt)("h3",{id:"detect"},"Detect"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ntranslatorKey = os.environ.get("TRANSLATOR_KEY", getSecret("translator-key"))\ndf =  spark.createDataFrame([\n  (["Hello, what is your name?"],)\n], ["text",])\n\ndetect = (Detect()\n      .setSubscriptionKey(translatorKey)\n      .setLocation("eastus")\n      .setTextCol("text")\n      .setOutputCol("result"))\n\ndisplay(detect\n    .transform(df)\n    .withColumn("language", col("result.language"))\n    .select("language"))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\nimport org.apache.spark.sql.functions.col\n\nval translatorKey = sys.env.getOrElse("TRANSLATOR_KEY", None)\nval df = Seq(List("Hello, what is your name?")).toDF("text")\n\nval detect = (new Detect()\n            .setSubscriptionKey(translatorKey)\n            .setLocation("eastus")\n            .setTextCol("text")\n            .setOutputCol("result"))\n\ndisplay(detect\n    .transform(df)\n    .withColumn("language", col("result.language"))\n    .select("language"))\n')))),(0,o.kt)(i.Z,{className:"Detect",py:"mmlspark.cognitive.html#module-mmlspark.cognitive.Detect",scala:"com/microsoft/azure/synapse/ml/cognitive/Detect.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/TextTranslator.scala",mdxType:"DocTable"}),(0,o.kt)("h3",{id:"breaksentence"},"BreakSentence"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ntranslatorKey = os.environ.get("TRANSLATOR_KEY", getSecret("translator-key"))\ndf =  spark.createDataFrame([\n  (["Hello, what is your name?"],)\n], ["text",])\n\nbreakSentence = (BreakSentence()\n            .setSubscriptionKey(translatorKey)\n            .setLocation("eastus")\n            .setTextCol("text")\n            .setOutputCol("result"))\n\ndisplay(breakSentence\n    .transform(df)\n    .withColumn("sentLen", flatten(col("result.sentLen")))\n    .select("sentLen"))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\nimport org.apache.spark.sql.functions.{col, flatten}\n\nval translatorKey = sys.env.getOrElse("TRANSLATOR_KEY", None)\nval df = Seq(List("Hello, what is your name?")).toDF("text")\n\nval breakSentence = (new BreakSentence()\n                        .setSubscriptionKey(translatorKey)\n                        .setLocation("eastus")\n                        .setTextCol("text")\n                        .setOutputCol("result"))\n\ndisplay(breakSentence\n    .transform(df)\n    .withColumn("sentLen", flatten(col("result.sentLen")))\n    .select("sentLen"))\n')))),(0,o.kt)(i.Z,{className:"BreakSentence",py:"mmlspark.cognitive.html#module-mmlspark.cognitive.BreakSentence",scala:"com/microsoft/azure/synapse/ml/cognitive/BreakSentence.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/TextTranslator.scala",mdxType:"DocTable"}),(0,o.kt)("h3",{id:"dictionarylookup"},"DictionaryLookup"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ntranslatorKey = os.environ.get("TRANSLATOR_KEY", getSecret("translator-key"))\ndf = spark.createDataFrame([\n  (["fly"],)\n], ["text",])\n\ndictionaryLookup = (DictionaryLookup()\n                  .setSubscriptionKey(translatorKey)\n                  .setLocation("eastus")\n                  .setFromLanguage("en")\n                  .setToLanguage("es")\n                  .setTextCol("text")\n                  .setOutputCol("result"))\n\ndisplay(dictionaryLookup\n    .transform(df)\n    .withColumn("translations", flatten(col("result.translations")))\n    .withColumn("normalizedTarget", col("translations.normalizedTarget"))\n    .select("normalizedTarget"))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\nimport org.apache.spark.sql.functions.{col, flatten}\n\nval translatorKey = sys.env.getOrElse("TRANSLATOR_KEY", None)\nval df = Seq(List("fly")).toDF("text")\n\nval dictionaryLookup = (new DictionaryLookup()\n                        .setSubscriptionKey(translatorKey)\n                        .setLocation("eastus")\n                        .setFromLanguage("en")\n                        .setToLanguage("es")\n                        .setTextCol("text")\n                        .setOutputCol("result"))\n\ndisplay(dictionaryLookup\n      .transform(df)\n      .withColumn("translations", flatten(col("result.translations")))\n      .withColumn("normalizedTarget", col("translations.normalizedTarget"))\n      .select("normalizedTarget"))\n')))),(0,o.kt)(i.Z,{className:"DictionaryLookup",py:"mmlspark.cognitive.html#module-mmlspark.cognitive.DictionaryLookup",scala:"com/microsoft/azure/synapse/ml/cognitive/DictionaryLookup.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/TextTranslator.scala",mdxType:"DocTable"}),(0,o.kt)("h3",{id:"dictionaryexamples"},"DictionaryExamples"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ntranslatorKey = os.environ.get("TRANSLATOR_KEY", getSecret("translator-key"))\ndf = spark.createDataFrame([\n  ([("fly", "volar")],)\n], ["textAndTranslation",])\n\ndictionaryExamples = (DictionaryExamples()\n                  .setSubscriptionKey(translatorKey)\n                  .setLocation("eastus")\n                  .setFromLanguage("en")\n                  .setToLanguage("es")\n                  .setOutputCol("result"))\n\ndisplay(dictionaryExamples\n    .transform(df)\n    .withColumn("examples", flatten(col("result.examples")))\n    .select("examples"))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\nimport org.apache.spark.sql.functions.{col, flatten}\n\nval translatorKey = sys.env.getOrElse("TRANSLATOR_KEY", None)\nval df = Seq(List(("fly", "volar"))).toDF("textAndTranslation")\n\nval dictionaryExamples = (new DictionaryExamples()\n                        .setSubscriptionKey(translatorKey)\n                        .setLocation("eastus")\n                        .setFromLanguage("en")\n                        .setToLanguage("es")\n                        .setOutputCol("result"))\n\ndisplay(dictionaryExamples\n    .transform(df)\n    .withColumn("examples", flatten(col("result.examples")))\n    .select("examples"))\n')))),(0,o.kt)(i.Z,{className:"DictionaryExamples",py:"mmlspark.cognitive.html#module-mmlspark.cognitive.DictionaryExamples",scala:"com/microsoft/azure/synapse/ml/cognitive/DictionaryExamples.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/TextTranslator.scala",mdxType:"DocTable"}),(0,o.kt)("h3",{id:"documenttranslator"},"DocumentTranslator"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ntranslatorKey = os.environ.get("TRANSLATOR_KEY", getSecret("translator-key"))\ntranslatorName = os.environ.get("TRANSLATOR_NAME", "mmlspark-translator")\n\ndocumentTranslator = (DocumentTranslator()\n                  .setSubscriptionKey(translatorKey)\n                  .setServiceName(translatorName)\n                  .setSourceUrlCol("sourceUrl")\n                  .setTargetsCol("targets")\n                  .setOutputCol("translationStatus"))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\n\nval translatorKey = sys.env.getOrElse("TRANSLATOR_KEY", None)\nval translatorName = sys.env.getOrElse("TRANSLATOR_NAME", None)\n\nval documentTranslator = (new DocumentTranslator()\n                        .setSubscriptionKey(translatorKey)\n                        .setServiceName(translatorName)\n                        .setSourceUrlCol("sourceUrl")\n                        .setTargetsCol("targets")\n                        .setOutputCol("translationStatus"))\n')))),(0,o.kt)(i.Z,{className:"DocumentTranslator",py:"mmlspark.cognitive.html#module-mmlspark.cognitive.DocumentTranslator",scala:"com/microsoft/azure/synapse/ml/cognitive/DocumentTranslator.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/DocumentTranslator.scala",mdxType:"DocTable"}))}v.isMDXComponent=!0;var f=["components"],b=[{value:"Computer Vision",id:"computer-vision",children:[{value:"OCR",id:"ocr",children:[],level:3},{value:"AnalyzeImage",id:"analyzeimage",children:[],level:3},{value:"RecognizeText",id:"recognizetext",children:[],level:3},{value:"ReadImage",id:"readimage",children:[],level:3},{value:"RecognizeDomainSpecificContent",id:"recognizedomainspecificcontent",children:[],level:3},{value:"GenerateThumbnails",id:"generatethumbnails",children:[],level:3},{value:"TagImage",id:"tagimage",children:[],level:3},{value:"DescribeImage",id:"describeimage",children:[],level:3}],level:2}],k={toc:b};function T(e){var t=e.components,a=(0,s.Z)(e,f);return(0,o.kt)("wrapper",(0,n.Z)({},k,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"computer-vision"},"Computer Vision"),(0,o.kt)("h3",{id:"ocr"},"OCR"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ncognitiveKey = os.environ.get("COGNITIVE_API_KEY", getSecret("cognitive-api-key"))\n\ndf = spark.createDataFrame([\n        ("https://mmlspark.blob.core.windows.net/datasets/OCR/test1.jpg", ),\n    ], ["url", ])\n\nocr = (OCR()\n        .setSubscriptionKey(cognitiveKey)\n        .setLocation("eastus")\n        .setImageUrlCol("url")\n        .setDetectOrientation(True)\n        .setOutputCol("ocr"))\n\ndisplay(ocr.transform(df))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\n\nval cognitiveKey = sys.env.getOrElse("COGNITIVE_API_KEY", None)\nval df = Seq(\n    "https://mmlspark.blob.core.windows.net/datasets/OCR/test1.jpg"\n  ).toDF("url")\n\n\nval ocr = (new OCR()\n        .setSubscriptionKey(cognitiveKey)\n        .setLocation("eastus")\n        .setImageUrlCol("url")\n        .setDetectOrientation(true)\n        .setOutputCol("ocr"))\n\ndisplay(ocr.transform(df))\n')))),(0,o.kt)(i.Z,{className:"OCR",py:"mmlspark.cognitive.html#module-mmlspark.cognitive.OCR",scala:"com/microsoft/azure/synapse/ml/cognitive/OCR.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/ComputerVision.scala",mdxType:"DocTable"}),(0,o.kt)("h3",{id:"analyzeimage"},"AnalyzeImage"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ncognitiveKey = os.environ.get("COGNITIVE_API_KEY", getSecret("cognitive-api-key"))\ndf = spark.createDataFrame([\n        ("https://raw.githubusercontent.com/Azure-Samples/cognitive-services-sample-data-files/master/ComputerVision/Images/objects.jpg", ),\n        ("https://raw.githubusercontent.com/Azure-Samples/cognitive-services-sample-data-files/master/ComputerVision/Images/dog.jpg", ),\n        ("https://raw.githubusercontent.com/Azure-Samples/cognitive-services-sample-data-files/master/ComputerVision/Images/house.jpg", )\n    ], ["image", ])\n\n\nai = (AnalyzeImage()\n        .setSubscriptionKey(cognitiveKey)\n        .setLocation("eastus")\n        .setImageUrlCol("url")\n        .setLanguageCol("language")\n        .setVisualFeatures(["Categories", "Tags", "Description", "Faces", "ImageType", "Color", "Adult", "Objects", "Brands"])\n        .setDetails(["Celebrities", "Landmarks"])\n        .setOutputCol("features"))\n\ndisplay(ai.transform(df).select("url", "features.description.tags"))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\n\nval cognitiveKey = sys.env.getOrElse("COGNITIVE_API_KEY", None)\nval df = Seq(\n    ("https://mmlspark.blob.core.windows.net/datasets/OCR/test1.jpg", "en"),\n    ("https://mmlspark.blob.core.windows.net/datasets/OCR/test2.png", null),\n    ("https://mmlspark.blob.core.windows.net/datasets/OCR/test3.png", "en")\n  ).toDF("url", "language")\n\nval ai = (new AnalyzeImage()\n        .setSubscriptionKey(cognitiveKey)\n        .setLocation("eastus")\n        .setImageUrlCol("url")\n        .setLanguageCol("language")\n        .setVisualFeatures(Seq("Categories", "Tags", "Description", "Faces", "ImageType", "Color", "Adult", "Objects", "Brands"))\n        .setDetails(Seq("Celebrities", "Landmarks"))\n        .setOutputCol("features"))\n\ndisplay(ai.transform(df).select("url", "features"))\n')))),(0,o.kt)(i.Z,{className:"AnalyzeImage",py:"mmlspark.cognitive.html#module-mmlspark.cognitive.AnalyzeImage",scala:"com/microsoft/azure/synapse/ml/cognitive/AnalyzeImage.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/ComputerVision.scala",mdxType:"DocTable"}),(0,o.kt)("h3",{id:"recognizetext"},"RecognizeText"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ncognitiveKey = os.environ.get("COGNITIVE_API_KEY", getSecret("cognitive-api-key"))\ndf = spark.createDataFrame([\n        ("https://mmlspark.blob.core.windows.net/datasets/OCR/test1.jpg", ),\n        ("https://mmlspark.blob.core.windows.net/datasets/OCR/test2.png", ),\n        ("https://mmlspark.blob.core.windows.net/datasets/OCR/test3.png", )\n    ], ["url", ])\n\nrt = (RecognizeText()\n        .setSubscriptionKey(cognitiveKey)\n        .setLocation("eastus")\n        .setImageUrlCol("url")\n        .setMode("Printed")\n        .setOutputCol("ocr")\n        .setConcurrency(5))\n\ndisplay(rt.transform(df))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\n\nval cognitiveKey = sys.env.getOrElse("COGNITIVE_API_KEY", None)\nval df = Seq(\n    "https://mmlspark.blob.core.windows.net/datasets/OCR/test1.jpg",\n    "https://mmlspark.blob.core.windows.net/datasets/OCR/test2.png",\n    "https://mmlspark.blob.core.windows.net/datasets/OCR/test3.png"\n  ).toDF("url")\n\nval rt = (new RecognizeText()\n        .setSubscriptionKey(cognitiveKey)\n        .setLocation("eastus")\n        .setImageUrlCol("url")\n        .setMode("Printed")\n        .setOutputCol("ocr")\n        .setConcurrency(5))\n\ndisplay(rt.transform(df))\n')))),(0,o.kt)(i.Z,{className:"RecognizeText",py:"mmlspark.cognitive.html#module-mmlspark.cognitive.RecognizeText",scala:"com/microsoft/azure/synapse/ml/cognitive/RecognizeText.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/ComputerVision.scala",mdxType:"DocTable"}),(0,o.kt)("h3",{id:"readimage"},"ReadImage"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ncognitiveKey = os.environ.get("COGNITIVE_API_KEY", getSecret("cognitive-api-key"))\ndf = spark.createDataFrame([\n        ("https://mmlspark.blob.core.windows.net/datasets/OCR/test1.jpg", ),\n        ("https://mmlspark.blob.core.windows.net/datasets/OCR/test2.png", ),\n        ("https://mmlspark.blob.core.windows.net/datasets/OCR/test3.png", )\n    ], ["url", ])\n\nri = (ReadImage()\n    .setSubscriptionKey(cognitiveKey)\n    .setLocation("eastus")\n    .setImageUrlCol("url")\n    .setOutputCol("ocr")\n    .setConcurrency(5))\n\ndisplay(ri.transform(df))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\n\nval cognitiveKey = sys.env.getOrElse("COGNITIVE_API_KEY", None)\nval df = Seq(\n    "https://mmlspark.blob.core.windows.net/datasets/OCR/test1.jpg",\n    "https://mmlspark.blob.core.windows.net/datasets/OCR/test2.png",\n    "https://mmlspark.blob.core.windows.net/datasets/OCR/test3.png"\n  ).toDF("url")\n\nval ri = (new ReadImage()\n        .setSubscriptionKey(cognitiveKey)\n        .setLocation("eastus")\n        .setImageUrlCol("url")\n        .setOutputCol("ocr")\n        .setConcurrency(5))\n\ndisplay(ri.transform(df))\n')))),(0,o.kt)(i.Z,{className:"ReadImage",py:"mmlspark.cognitive.html#module-mmlspark.cognitive.ReadImage",scala:"com/microsoft/azure/synapse/ml/cognitive/ReadImage.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/ComputerVision.scala",mdxType:"DocTable"}),(0,o.kt)("h3",{id:"recognizedomainspecificcontent"},"RecognizeDomainSpecificContent"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ncognitiveKey = os.environ.get("COGNITIVE_API_KEY", getSecret("cognitive-api-key"))\ndf = spark.createDataFrame([\n        ("https://mmlspark.blob.core.windows.net/datasets/DSIR/test2.jpg", )\n    ], ["url", ])\n\nceleb = (RecognizeDomainSpecificContent()\n        .setSubscriptionKey(cognitiveKey)\n        .setModel("celebrities")\n        .setLocation("eastus")\n        .setImageUrlCol("url")\n        .setOutputCol("celebs"))\n\ndisplay(celeb.transform(df))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\n\nval cognitiveKey = sys.env.getOrElse("COGNITIVE_API_KEY", None)\nval df = Seq(\n    "https://mmlspark.blob.core.windows.net/datasets/DSIR/test2.jpg"\n  ).toDF("url")\n\nval celeb = (new RecognizeDomainSpecificContent()\n                .setSubscriptionKey(cognitiveKey)\n                .setModel("celebrities")\n                .setLocation("eastus")\n                .setImageUrlCol("url")\n                .setOutputCol("celebs"))\n\ndisplay(celeb.transform(df))\n')))),(0,o.kt)(i.Z,{className:"RecognizeDomainSpecificContent",py:"mmlspark.cognitive.html#module-mmlspark.cognitive.RecognizeDomainSpecificContent",scala:"com/microsoft/azure/synapse/ml/cognitive/RecognizeDomainSpecificContent.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/ComputerVision.scala",mdxType:"DocTable"}),(0,o.kt)("h3",{id:"generatethumbnails"},"GenerateThumbnails"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ncognitiveKey = os.environ.get("COGNITIVE_API_KEY", getSecret("cognitive-api-key"))\ndf = spark.createDataFrame([\n        ("https://mmlspark.blob.core.windows.net/datasets/DSIR/test1.jpg", )\n    ], ["url", ])\n\ngt = (GenerateThumbnails()\n        .setSubscriptionKey(cognitiveKey)\n        .setLocation("eastus")\n        .setHeight(50)\n        .setWidth(50)\n        .setSmartCropping(True)\n        .setImageUrlCol("url")\n        .setOutputCol("thumbnails"))\n\ndisplay(gt.transform(df))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\n\nval cognitiveKey = sys.env.getOrElse("COGNITIVE_API_KEY", None)\nval df: DataFrame = Seq(\n    "https://mmlspark.blob.core.windows.net/datasets/DSIR/test1.jpg"\n  ).toDF("url")\n\nval gt = (new GenerateThumbnails()\n        .setSubscriptionKey(cognitiveKey)\n        .setLocation("eastus")\n        .setHeight(50)\n        .setWidth(50)\n        .setSmartCropping(true)\n        .setImageUrlCol("url")\n        .setOutputCol("thumbnails"))\n\ndisplay(gt.transform(df))\n')))),(0,o.kt)(i.Z,{className:"GenerateThumbnails",py:"mmlspark.cognitive.html#module-mmlspark.cognitive.GenerateThumbnails",scala:"com/microsoft/azure/synapse/ml/cognitive/GenerateThumbnails.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/ComputerVision.scala",mdxType:"DocTable"}),(0,o.kt)("h3",{id:"tagimage"},"TagImage"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ncognitiveKey = os.environ.get("COGNITIVE_API_KEY", getSecret("cognitive-api-key"))\ndf = spark.createDataFrame([\n        ("https://mmlspark.blob.core.windows.net/datasets/DSIR/test1.jpg", )\n    ], ["url", ])\n\nti = (TagImage()\n        .setSubscriptionKey(cognitiveKey)\n        .setLocation("eastus")\n        .setImageUrlCol("url")\n        .setOutputCol("tags"))\n\ndisplay(ti.transform(df))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\n\nval cognitiveKey = sys.env.getOrElse("COGNITIVE_API_KEY", None)\nval df = Seq(\n    "https://mmlspark.blob.core.windows.net/datasets/DSIR/test1.jpg"\n  ).toDF("url")\n\nval ti = (new TagImage()\n        .setSubscriptionKey(cognitiveKey)\n        .setLocation("eastus")\n        .setImageUrlCol("url")\n        .setOutputCol("tags"))\n\ndisplay(ti.transform(df))\n')))),(0,o.kt)(i.Z,{className:"TagImage",py:"mmlspark.cognitive.html#module-mmlspark.cognitive.TagImage",scala:"com/microsoft/azure/synapse/ml/cognitive/TagImage.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/ComputerVision.scala",mdxType:"DocTable"}),(0,o.kt)("h3",{id:"describeimage"},"DescribeImage"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ncognitiveKey = os.environ.get("COGNITIVE_API_KEY", getSecret("cognitive-api-key"))\ndf = spark.createDataFrame([\n        ("https://mmlspark.blob.core.windows.net/datasets/DSIR/test1.jpg", )\n    ], ["url", ])\n\ndi = (DescribeImage()\n        .setSubscriptionKey(cognitiveKey)\n        .setLocation("eastus")\n        .setMaxCandidates(3)\n        .setImageUrlCol("url")\n        .setOutputCol("descriptions"))\n\ndisplay(di.transform(df))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\n\nval cognitiveKey = sys.env.getOrElse("COGNITIVE_API_KEY", None)\nval df = Seq(\n    "https://mmlspark.blob.core.windows.net/datasets/DSIR/test1.jpg"\n  ).toDF("url")\n\nval di = (new DescribeImage()\n        .setSubscriptionKey(cognitiveKey)\n        .setLocation("eastus")\n        .setMaxCandidates(3)\n        .setImageUrlCol("url")\n        .setOutputCol("descriptions"))\n\ndisplay(di.transform(df))\n')))),(0,o.kt)(i.Z,{className:"DescribeImage",py:"mmlspark.cognitive.html#module-mmlspark.cognitive.DescribeImage",scala:"com/microsoft/azure/synapse/ml/cognitive/DescribeImage.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/ComputerVision.scala",mdxType:"DocTable"}))}T.isMDXComponent=!0;var h=["components"],I=[{value:"Form Recognizer",id:"form-recognizer",children:[{value:"AnalyzeLayout",id:"analyzelayout",children:[],level:3},{value:"AnalyzeReceipts",id:"analyzereceipts",children:[],level:3},{value:"AnalyzeBusinessCards",id:"analyzebusinesscards",children:[],level:3},{value:"AnalyzeInvoices",id:"analyzeinvoices",children:[],level:3},{value:"AnalyzeIDDocuments",id:"analyzeiddocuments",children:[],level:3},{value:"AnalyzeCustomModel",id:"analyzecustommodel",children:[],level:3},{value:"GetCustomModel",id:"getcustommodel",children:[],level:3},{value:"ListCustomModels",id:"listcustommodels",children:[],level:3}],level:2}],S={toc:I};function C(e){var t=e.components,a=(0,s.Z)(e,h);return(0,o.kt)("wrapper",(0,n.Z)({},S,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"form-recognizer"},"Form Recognizer"),(0,o.kt)("h3",{id:"analyzelayout"},"AnalyzeLayout"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ncognitiveKey = os.environ.get("COGNITIVE_API_KEY", getSecret("cognitive-api-key"))\nimageDf = spark.createDataFrame([\n  ("https://mmlspark.blob.core.windows.net/datasets/FormRecognizer/layout1.jpg",)\n], ["source",])\n\nanalyzeLayout = (AnalyzeLayout()\n            .setSubscriptionKey(cognitiveKey)\n            .setLocation("eastus")\n            .setImageUrlCol("source")\n            .setOutputCol("layout")\n            .setConcurrency(5))\n\ndisplay(analyzeLayout\n        .transform(imageDf)\n        .withColumn("lines", flatten(col("layout.analyzeResult.readResults.lines")))\n        .withColumn("readLayout", col("lines.text"))\n        .withColumn("tables", flatten(col("layout.analyzeResult.pageResults.tables")))\n        .withColumn("cells", flatten(col("tables.cells")))\n        .withColumn("pageLayout", col("cells.text"))\n        .select("source", "readLayout", "pageLayout"))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\n\nval cognitiveKey = sys.env.getOrElse("COGNITIVE_API_KEY", None)\nval imageDf = Seq(\n    "https://mmlspark.blob.core.windows.net/datasets/FormRecognizer/layout1.jpg"\n  ).toDF("source")\n\nval analyzeLayout = (new AnalyzeLayout()\n                        .setSubscriptionKey(cognitiveKey)\n                        .setLocation("eastus")\n                        .setImageUrlCol("source")\n                        .setOutputCol("layout")\n                        .setConcurrency(5))\n\ndisplay(analyzeLayout.transform(imageDf)\n')))),(0,o.kt)(i.Z,{className:"AnalyzeLayout",py:"synapse.ml.cognitive.html#module-synapse.ml.cognitive.AnalyzeLayout",scala:"com/microsoft/azure/synapse/ml/cognitive/AnalyzeLayout.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/FormRecognizer.scala",mdxType:"DocTable"}),(0,o.kt)("h3",{id:"analyzereceipts"},"AnalyzeReceipts"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ncognitiveKey = os.environ.get("COGNITIVE_API_KEY", getSecret("cognitive-api-key"))\nimageDf = spark.createDataFrame([\n  ("https://mmlspark.blob.core.windows.net/datasets/FormRecognizer/receipt1.png",),\n  ("https://mmlspark.blob.core.windows.net/datasets/FormRecognizer/receipt1.png",)\n], ["image",])\n\nanalyzeReceipts = (AnalyzeReceipts()\n                  .setSubscriptionKey(cognitiveKey)\n                  .setLocation("eastus")\n                  .setImageUrlCol("source")\n                  .setOutputCol("receipts")\n                  .setConcurrency(5))\n\ndisplay(analyzeReceipts.transform(imageDf))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\n\nval cognitiveKey = sys.env.getOrElse("COGNITIVE_API_KEY", None)\nval imageDf = Seq(\n    "https://mmlspark.blob.core.windows.net/datasets/FormRecognizer/receipt1.png",\n    "https://mmlspark.blob.core.windows.net/datasets/FormRecognizer/receipt1.png"\n  ).toDF("source")\n\nval analyzeReceipts = (new AnalyzeReceipts()\n                        .setSubscriptionKey(cognitiveKey)\n                        .setLocation("eastus")\n                        .setImageUrlCol("source")\n                        .setOutputCol("receipts")\n                        .setConcurrency(5))\n\ndisplay(analyzeReceipts.transform(imageDf))\n')))),(0,o.kt)(i.Z,{className:"AnalyzeReceipts",py:"synapse.ml.cognitive.html#module-synapse.ml.cognitive.AnalyzeReceipts",scala:"com/microsoft/azure/synapse/ml/cognitive/AnalyzeReceipts.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/FormRecognizer.scala",mdxType:"DocTable"}),(0,o.kt)("h3",{id:"analyzebusinesscards"},"AnalyzeBusinessCards"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ncognitiveKey = os.environ.get("COGNITIVE_API_KEY", getSecret("cognitive-api-key"))\nimageDf = spark.createDataFrame([\n  ("https://mmlspark.blob.core.windows.net/datasets/FormRecognizer/business_card.jpg",)\n], ["source",])\n\nanalyzeBusinessCards = (AnalyzeBusinessCards()\n                        .setSubscriptionKey(cognitiveKey)\n                        .setLocation("eastus")\n                        .setImageUrlCol("source")\n                        .setOutputCol("businessCards")\n                        .setConcurrency(5))\n\ndisplay(analyzeBusinessCards.transform(imageDf)\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\n\nval cognitiveKey = sys.env.getOrElse("COGNITIVE_API_KEY", None)\nval imageDf = Seq(\n    "https://mmlspark.blob.core.windows.net/datasets/FormRecognizer/business_card.jpg"\n  ).toDF("source")\n\nval analyzeBusinessCards = (new AnalyzeBusinessCards()\n                              .setSubscriptionKey(cognitiveKey)\n                              .setLocation("eastus")\n                              .setImageUrlCol("source")\n                              .setOutputCol("businessCards")\n                              .setConcurrency(5))\n\ndisplay(analyzeBusinessCards.transform(imageDf)\n')))),(0,o.kt)(i.Z,{className:"AnalyzeBusinessCards",py:"synapse.ml.cognitive.html#module-synapse.ml.cognitive.AnalyzeBusinessCards",scala:"com/microsoft/azure/synapse/ml/cognitive/AnalyzeBusinessCards.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/FormRecognizer.scala",mdxType:"DocTable"}),(0,o.kt)("h3",{id:"analyzeinvoices"},"AnalyzeInvoices"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ncognitiveKey = os.environ.get("COGNITIVE_API_KEY", getSecret("cognitive-api-key"))\nimageDf = spark.createDataFrame([\n  ("https://mmlspark.blob.core.windows.net/datasets/FormRecognizer/invoice2.png",)\n], ["source",])\n\nanalyzeInvoices = (AnalyzeInvoices()\n                  .setSubscriptionKey(cognitiveKey)\n                  .setLocation("eastus")\n                  .setImageUrlCol("source")\n                  .setOutputCol("invoices")\n                  .setConcurrency(5))\n\ndisplay(analyzeInvoices\n        .transform(imageDf)\n        .withColumn("documents", explode(col("invoices.analyzeResult.documentResults.fields")))\n        .select("source", "documents"))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\n\nval cognitiveKey = sys.env.getOrElse("COGNITIVE_API_KEY", None)\nval imageDf = Seq(\n    "https://mmlspark.blob.core.windows.net/datasets/FormRecognizer/invoice2.png"\n  ).toDF("source")\n\nval analyzeInvoices = (new AnalyzeInvoices()\n                        .setSubscriptionKey(cognitiveKey)\n                        .setLocation("eastus")\n                        .setImageUrlCol("source")\n                        .setOutputCol("invoices")\n                        .setConcurrency(5))\n\ndisplay(analyzeInvoices.transform(imageD4))\n')))),(0,o.kt)(i.Z,{className:"AnalyzeInvoices",py:"synapse.ml.cognitive.html#module-synapse.ml.cognitive.AnalyzeInvoices",scala:"com/microsoft/azure/synapse/ml/cognitive/AnalyzeInvoices.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/FormRecognizer.scala",mdxType:"DocTable"}),(0,o.kt)("h3",{id:"analyzeiddocuments"},"AnalyzeIDDocuments"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ncognitiveKey = os.environ.get("COGNITIVE_API_KEY", getSecret("cognitive-api-key"))\nimageDf = spark.createDataFrame([\n  ("https://mmlspark.blob.core.windows.net/datasets/FormRecognizer/id1.jpg",)\n], ["source",])\n\nanalyzeIDDocuments = (AnalyzeIDDocuments()\n                  .setSubscriptionKey(cognitiveKey)\n                  .setLocation("eastus")\n                  .setImageUrlCol("source")\n                  .setOutputCol("ids")\n                  .setConcurrency(5))\n\ndisplay(analyzeIDDocuments\n        .transform(imageDf)\n        .withColumn("documents", explode(col("ids.analyzeResult.documentResults.fields")))\n        .select("source", "documents"))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\n\nval cognitiveKey = sys.env.getOrElse("COGNITIVE_API_KEY", None)\nval imageDf = Seq(\n    "https://mmlspark.blob.core.windows.net/datasets/FormRecognizer/id1.jpg"\n  ).toDF("source")\n\nval analyzeIDDocuments = (new AnalyzeIDDocuments()\n                        .setSubscriptionKey(cognitiveKey)\n                        .setLocation("eastus")\n                        .setImageUrlCol("source")\n                        .setOutputCol("ids")\n                        .setConcurrency(5))\n\ndisplay(analyzeIDDocuments.transform(imageDf))\n')))),(0,o.kt)(i.Z,{className:"AnalyzeIDDocuments",py:"synapse.ml.cognitive.html#module-synapse.ml.cognitive.AnalyzeIDDocuments",scala:"com/microsoft/azure/synapse/ml/cognitive/AnalyzeIDDocuments.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/FormRecognizer.scala",mdxType:"DocTable"}),(0,o.kt)("h3",{id:"analyzecustommodel"},"AnalyzeCustomModel"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ncognitiveKey = os.environ.get("COGNITIVE_API_KEY", getSecret("cognitive-api-key"))\nmodelId = "02bc2f58-2beb-4ae3-84fb-08f011b2f7b8" # put your own modelId here\nimageDf = spark.createDataFrame([\n  ("https://mmlspark.blob.core.windows.net/datasets/FormRecognizer/invoice2.png",)\n], ["source",])\n\nanalyzeCustomModel = (AnalyzeCustomModel()\n                 .setSubscriptionKey(cognitiveKey)\n                 .setLocation("eastus")\n                 .setModelId(modelId)\n                 .setImageUrlCol("source")\n                 .setOutputCol("output")\n                 .setConcurrency(5))\n\ndisplay(analyzeCustomModel\n        .transform(imageDf)\n        .withColumn("keyValuePairs", flatten(col("output.analyzeResult.pageResults.keyValuePairs")))\n        .withColumn("keys", col("keyValuePairs.key.text"))\n        .withColumn("values", col("keyValuePairs.value.text"))\n        .withColumn("keyValuePairs", create_map(lit("key"), col("keys"), lit("value"), col("values")))\n        .select("source", "keyValuePairs"))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\n\nval cognitiveKey = sys.env.getOrElse("COGNITIVE_API_KEY", None)\nval modelId = "02bc2f58-2beb-4ae3-84fb-08f011b2f7b8" // put your own modelId here\nval imageDf = Seq(\n    "https://mmlspark.blob.core.windows.net/datasets/FormRecognizer/invoice2.png"\n  ).toDF("source")\n\nval analyzeCustomModel = (new AnalyzeCustomModel()\n                        .setSubscriptionKey(cognitiveKey)\n                        .setLocation("eastus")\n                        .setModelId(modelId)\n                        .setImageUrlCol("source")\n                        .setOutputCol("output")\n                        .setConcurrency(5))\n\ndisplay(analyzeCustomModel.transform(imageDf))\n')))),(0,o.kt)(i.Z,{className:"AnalyzeCustomModel",py:"synapse.ml.cognitive.html#module-synapse.ml.cognitive.AnalyzeCustomModel",scala:"com/microsoft/azure/synapse/ml/cognitive/AnalyzeCustomModel.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/FormRecognizer.scala",mdxType:"DocTable"}),(0,o.kt)("h3",{id:"getcustommodel"},"GetCustomModel"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ncognitiveKey = os.environ.get("COGNITIVE_API_KEY", getSecret("cognitive-api-key"))\nmodelId = "02bc2f58-2beb-4ae3-84fb-08f011b2f7b8" # put your own modelId here\nemptyDf = spark.createDataFrame([("",)])\n\ngetCustomModel = (GetCustomModel()\n                  .setSubscriptionKey(cognitiveKey)\n                  .setLocation("eastus")\n                  .setModelId(modelId)\n                  .setIncludeKeys(true)\n                  .setOutputCol("model")\n                  .setConcurrency(5))\n\ndisplay(getCustomModel\n        .transform(emptyDf)\n        .withColumn("modelInfo", col("model.ModelInfo"))\n        .withColumn("trainResult", col("model.TrainResult"))\n        .select("modelInfo", "trainResult"))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\n\nval cognitiveKey = sys.env.getOrElse("COGNITIVE_API_KEY", None)\nval modelId = "02bc2f58-2beb-4ae3-84fb-08f011b2f7b8" // put your own modelId here\nval emptyDf = Seq("").toDF()\n\nval getCustomModel = (new GetCustomModel()\n                        .setSubscriptionKey(cognitiveKey)\n                        .setLocation("eastus")\n                        .setModelId(modelId)\n                        .setIncludeKeys(true)\n                        .setOutputCol("model")\n                        .setConcurrency(5))\n\ndisplay(getCustomModel.transform(emptyDf))\n')))),(0,o.kt)(i.Z,{className:"GetCustomModel",py:"mmlspark.cognitive.html#module-mmlspark.cognitive.GetCustomModel",scala:"com/microsoft/azure/synapse/ml/cognitive/GetCustomModel.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/FormRecognizer.scala",mdxType:"DocTable"}),(0,o.kt)("h3",{id:"listcustommodels"},"ListCustomModels"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ncognitiveKey = os.environ.get("COGNITIVE_API_KEY", getSecret("cognitive-api-key"))\nemptyDf = spark.createDataFrame([("",)])\n\nlistCustomModels = (ListCustomModels()\n                  .setSubscriptionKey(cognitiveKey)\n                  .setLocation("eastus")\n                  .setOp("full")\n                  .setOutputCol("models")\n                  .setConcurrency(5))\n\ndisplay(listCustomModels\n       .transform(emptyDf)\n       .withColumn("modelIds", col("models.modelList.modelId"))\n       .select("modelIds"))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\n\nval cognitiveKey = sys.env.getOrElse("COGNITIVE_API_KEY", None)\nval emptyDf = Seq("").toDF()\n\nval listCustomModels = (new ListCustomModels()\n                        .setSubscriptionKey(cognitiveKey)\n                        .setLocation("eastus")\n                        .setOp("full")\n                        .setOutputCol("models")\n                        .setConcurrency(5))\n\ndisplay(listCustomModels.transform(emptyDf))\n')))),(0,o.kt)(i.Z,{className:"ListCustomModels",py:"mmlspark.cognitive.html#module-mmlspark.cognitive.ListCustomModels",scala:"com/microsoft/azure/synapse/ml/cognitive/ListCustomModels.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/FormRecognizer.scala",mdxType:"DocTable"}))}C.isMDXComponent=!0;var x=["components"],N=[{value:"Anomaly Detection",id:"anomaly-detection",children:[{value:"DetectLastAnomaly",id:"detectlastanomaly",children:[],level:3},{value:"DetectAnomalies",id:"detectanomalies",children:[],level:3},{value:"SimpleDetectAnomalies",id:"simpledetectanomalies",children:[],level:3}],level:2}],D={toc:N};function K(e){var t=e.components,a=(0,s.Z)(e,x);return(0,o.kt)("wrapper",(0,n.Z)({},D,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"anomaly-detection"},"Anomaly Detection"),(0,o.kt)("h3",{id:"detectlastanomaly"},"DetectLastAnomaly"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\nanomalyKey = os.environ.get("ANOMALY_API_KEY", getSecret("anomaly-api-key"))\ndf = (spark.createDataFrame([\n    ("1972-01-01T00:00:00Z", 826.0),\n    ("1972-02-01T00:00:00Z", 799.0),\n    ("1972-03-01T00:00:00Z", 890.0),\n    ("1972-04-01T00:00:00Z", 900.0),\n    ("1972-05-01T00:00:00Z", 766.0),\n    ("1972-06-01T00:00:00Z", 805.0),\n    ("1972-07-01T00:00:00Z", 821.0),\n    ("1972-08-01T00:00:00Z", 20000.0),\n    ("1972-09-01T00:00:00Z", 883.0),\n    ("1972-10-01T00:00:00Z", 898.0),\n    ("1972-11-01T00:00:00Z", 957.0),\n    ("1972-12-01T00:00:00Z", 924.0),\n    ("1973-01-01T00:00:00Z", 881.0),\n    ("1973-02-01T00:00:00Z", 837.0),\n    ("1973-03-01T00:00:00Z", 90000.0)\n], ["timestamp", "value"])\n      .withColumn("group", lit(1))\n      .withColumn("inputs", struct(col("timestamp"), col("value")))\n      .groupBy(col("group"))\n      .agg(sort_array(collect_list(col("inputs"))).alias("inputs")))\n\ndla = (DetectLastAnomaly()\n      .setSubscriptionKey(anomalyKey)\n      .setLocation("westus2")\n      .setOutputCol("anomalies")\n      .setSeriesCol("inputs")\n      .setGranularity("monthly")\n      .setErrorCol("errors"))\n\ndisplay(dla.transform(df))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\nimport org.apache.spark.sql.functions.{col, collect_list, lit, sort_array, struct}\n\nval anomalyKey = sys.env.getOrElse("ANOMALY_API_KEY", None)\nval df = (Seq(\n    ("1972-01-01T00:00:00Z", 826.0),\n    ("1972-02-01T00:00:00Z", 799.0),\n    ("1972-03-01T00:00:00Z", 890.0),\n    ("1972-04-01T00:00:00Z", 900.0),\n    ("1972-05-01T00:00:00Z", 766.0),\n    ("1972-06-01T00:00:00Z", 805.0),\n    ("1972-07-01T00:00:00Z", 821.0),\n    ("1972-08-01T00:00:00Z", 20000.0),\n    ("1972-09-01T00:00:00Z", 883.0),\n    ("1972-10-01T00:00:00Z", 898.0),\n    ("1972-11-01T00:00:00Z", 957.0),\n    ("1972-12-01T00:00:00Z", 924.0),\n    ("1973-01-01T00:00:00Z", 881.0),\n    ("1973-02-01T00:00:00Z", 837.0),\n    ("1973-03-01T00:00:00Z", 90000.0)\n  ).toDF("timestamp","value")\n    .withColumn("group", lit(1))\n    .withColumn("inputs", struct(col("timestamp"), col("value")))\n    .groupBy(col("group"))\n    .agg(sort_array(collect_list(col("inputs"))).alias("inputs")))\n\nval dla = (new DetectLastAnomaly()\n            .setSubscriptionKey(anomalyKey)\n            .setLocation("westus2")\n            .setOutputCol("anomalies")\n            .setSeriesCol("inputs")\n            .setGranularity("monthly")\n            .setErrorCol("errors"))\n\ndisplay(dla.transform(df))\n')))),(0,o.kt)(i.Z,{className:"DetectLastAnomaly",py:"synapse.ml.cognitive.html#module-synapse.ml.cognitive.DetectLastAnomaly",scala:"com/microsoft/azure/synapse/ml/cognitive/DetectLastAnomaly.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/AnomalyDetection.scala",mdxType:"DocTable"}),(0,o.kt)("h3",{id:"detectanomalies"},"DetectAnomalies"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\nanomalyKey = os.environ.get("ANOMALY_API_KEY", getSecret("anomaly-api-key"))\ndf = (spark.createDataFrame([\n    ("1972-01-01T00:00:00Z", 826.0),\n    ("1972-02-01T00:00:00Z", 799.0),\n    ("1972-03-01T00:00:00Z", 890.0),\n    ("1972-04-01T00:00:00Z", 900.0),\n    ("1972-05-01T00:00:00Z", 766.0),\n    ("1972-06-01T00:00:00Z", 805.0),\n    ("1972-07-01T00:00:00Z", 821.0),\n    ("1972-08-01T00:00:00Z", 20000.0),\n    ("1972-09-01T00:00:00Z", 883.0),\n    ("1972-10-01T00:00:00Z", 898.0),\n    ("1972-11-01T00:00:00Z", 957.0),\n    ("1972-12-01T00:00:00Z", 924.0),\n    ("1973-01-01T00:00:00Z", 881.0),\n    ("1973-02-01T00:00:00Z", 837.0),\n    ("1973-03-01T00:00:00Z", 90000.0)\n], ["timestamp", "value"])\n      .withColumn("group", lit(1))\n      .withColumn("inputs", struct(col("timestamp"), col("value")))\n      .groupBy(col("group"))\n      .agg(sort_array(collect_list(col("inputs"))).alias("inputs")))\n\nda = (DetectAnomalies()\n      .setSubscriptionKey(anomalyKey)\n      .setLocation("westus2")\n      .setOutputCol("anomalies")\n      .setSeriesCol("inputs")\n      .setGranularity("monthly"))\n\ndisplay(da.transform(df))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\n\nval anomalyKey = sys.env.getOrElse("ANOMALY_API_KEY", None)\nval df = (Seq(\n    ("1972-01-01T00:00:00Z", 826.0),\n    ("1972-02-01T00:00:00Z", 799.0),\n    ("1972-03-01T00:00:00Z", 890.0),\n    ("1972-04-01T00:00:00Z", 900.0),\n    ("1972-05-01T00:00:00Z", 766.0),\n    ("1972-06-01T00:00:00Z", 805.0),\n    ("1972-07-01T00:00:00Z", 821.0),\n    ("1972-08-01T00:00:00Z", 20000.0),\n    ("1972-09-01T00:00:00Z", 883.0),\n    ("1972-10-01T00:00:00Z", 898.0),\n    ("1972-11-01T00:00:00Z", 957.0),\n    ("1972-12-01T00:00:00Z", 924.0),\n    ("1973-01-01T00:00:00Z", 881.0),\n    ("1973-02-01T00:00:00Z", 837.0),\n    ("1973-03-01T00:00:00Z", 90000.0)\n  ).toDF("timestamp","value")\n    .withColumn("group", lit(1))\n    .withColumn("inputs", struct(col("timestamp"), col("value")))\n    .groupBy(col("group"))\n    .agg(sort_array(collect_list(col("inputs"))).alias("inputs")))\n\nval da = (new DetectAnomalies()\n            .setSubscriptionKey(anomalyKey)\n            .setLocation("westus2")\n            .setOutputCol("anomalies")\n            .setSeriesCol("inputs")\n            .setGranularity("monthly"))\n\ndisplay(da.transform(df))\n')))),(0,o.kt)(i.Z,{className:"DetectAnomalies",py:"mmlspark.cognitive.html#module-mmlspark.cognitive.DetectAnomalies",scala:"com/microsoft/azure/synapse/ml/cognitive/DetectAnomalies.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/AnomalyDetection.scala",mdxType:"DocTable"}),(0,o.kt)("h3",{id:"simpledetectanomalies"},"SimpleDetectAnomalies"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\nanomalyKey = os.environ.get("ANOMALY_API_KEY", getSecret("anomaly-api-key"))\ndf = (spark.createDataFrame([\n    ("1972-01-01T00:00:00Z", 826.0, 1.0),\n    ("1972-02-01T00:00:00Z", 799.0, 1.0),\n    ("1972-03-01T00:00:00Z", 890.0, 1.0),\n    ("1972-04-01T00:00:00Z", 900.0, 1.0),\n    ("1972-05-01T00:00:00Z", 766.0, 1.0),\n    ("1972-06-01T00:00:00Z", 805.0, 1.0),\n    ("1972-07-01T00:00:00Z", 821.0, 1.0),\n    ("1972-08-01T00:00:00Z", 20000.0, 1.0),\n    ("1972-09-01T00:00:00Z", 883.0, 1.0),\n    ("1972-10-01T00:00:00Z", 898.0, 1.0),\n    ("1972-11-01T00:00:00Z", 957.0, 1.0),\n    ("1972-12-01T00:00:00Z", 924.0, 1.0),\n    ("1973-01-01T00:00:00Z", 881.0, 1.0),\n    ("1973-02-01T00:00:00Z", 837.0, 1.0),\n    ("1973-03-01T00:00:00Z", 90000.0, 1.0),\n    ("1972-01-01T00:00:00Z", 826.0, 2.0),\n    ("1972-02-01T00:00:00Z", 799.0, 2.0),\n    ("1972-03-01T00:00:00Z", 890.0, 2.0),\n    ("1972-04-01T00:00:00Z", 900.0, 2.0),\n    ("1972-05-01T00:00:00Z", 766.0, 2.0),\n    ("1972-06-01T00:00:00Z", 805.0, 2.0),\n    ("1972-07-01T00:00:00Z", 821.0, 2.0),\n    ("1972-08-01T00:00:00Z", 20000.0, 2.0),\n    ("1972-09-01T00:00:00Z", 883.0, 2.0),\n    ("1972-10-01T00:00:00Z", 898.0, 2.0),\n    ("1972-11-01T00:00:00Z", 957.0, 2.0),\n    ("1972-12-01T00:00:00Z", 924.0, 2.0),\n    ("1973-01-01T00:00:00Z", 881.0, 2.0),\n    ("1973-02-01T00:00:00Z", 837.0, 2.0),\n    ("1973-03-01T00:00:00Z", 90000.0, 2.0)\n], ["timestamp", "value", "group"])\n\nsda = (SimpleDetectAnomalies()\n      .setSubscriptionKey(anomalyKey)\n      .setLocation("westus2")\n      .setOutputCol("anomalies")\n      .setSeriesCol("inputs")\n      .setGranularity("monthly"))\n\ndisplay(sda.transform(df))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\n\nval anomalyKey = sys.env.getOrElse("ANOMALY_API_KEY", None)\nval baseSeq = Seq(\n    ("1972-01-01T00:00:00Z", 826.0),\n    ("1972-02-01T00:00:00Z", 799.0),\n    ("1972-03-01T00:00:00Z", 890.0),\n    ("1972-04-01T00:00:00Z", 900.0),\n    ("1972-05-01T00:00:00Z", 766.0),\n    ("1972-06-01T00:00:00Z", 805.0),\n    ("1972-07-01T00:00:00Z", 821.0),\n    ("1972-08-01T00:00:00Z", 20000.0),\n    ("1972-09-01T00:00:00Z", 883.0),\n    ("1972-10-01T00:00:00Z", 898.0),\n    ("1972-11-01T00:00:00Z", 957.0),\n    ("1972-12-01T00:00:00Z", 924.0),\n    ("1973-01-01T00:00:00Z", 881.0),\n    ("1973-02-01T00:00:00Z", 837.0),\n    ("1973-03-01T00:00:00Z", 9000.0)\n  )\nval df = (baseSeq.map(p => (p._1,p._2,1.0))\n    .++(baseSeq.map(p => (p._1,p._2,2.0)))\n    .toDF("timestamp","value","group"))\n\nval sda = (new SimpleDetectAnomalies()\n            .setSubscriptionKey(anomalyKey)\n            .setLocation("westus2")\n            .setOutputCol("anomalies")\n            .setGroupbyCol("group")\n            .setGranularity("monthly"))\n\ndisplay(sda.transform(df))\n')))),(0,o.kt)(i.Z,{className:"SimpleDetectAnomalies",py:"mmlspark.cognitive.html#module-mmlspark.cognitive.SimpleDetectAnomalies",scala:"com/microsoft/azure/synapse/ml/cognitive/SimpleDetectAnomalies.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/AnomalyDetection.scala",mdxType:"DocTable"}))}K.isMDXComponent=!0;var w=["components"],L=[{value:"Face",id:"face",children:[{value:"DetectFace",id:"detectface",children:[],level:3},{value:"FindSimilarFace",id:"findsimilarface",children:[],level:3},{value:"GroupFaces",id:"groupfaces",children:[],level:3},{value:"IdentifyFaces",id:"identifyfaces",children:[],level:3},{value:"VerifyFaces",id:"verifyfaces",children:[],level:3}],level:2}],_={toc:L};function z(e){var t=e.components,a=(0,s.Z)(e,w);return(0,o.kt)("wrapper",(0,n.Z)({},_,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"face"},"Face"),(0,o.kt)("h3",{id:"detectface"},"DetectFace"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ncognitiveKey = os.environ.get("COGNITIVE_API_KEY", getSecret("cognitive-api-key"))\ndf = spark.createDataFrame([\n  ("https://mmlspark.blob.core.windows.net/datasets/DSIR/test1.jpg",),\n], ["url"])\n\nface = (DetectFace()\n    .setSubscriptionKey(cognitiveKey)\n    .setLocation("eastus")\n    .setImageUrlCol("url")\n    .setOutputCol("detected_faces")\n    .setReturnFaceId(True)\n    .setReturnFaceLandmarks(False)\n    .setReturnFaceAttributes(["age", "gender", "headPose", "smile", "facialHair", "glasses", "emotion",\n      "hair", "makeup", "occlusion", "accessories", "blur", "exposure", "noise"]))\n\ndisplay(face.transform(df))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\n\nval cognitiveKey = sys.env.getOrElse("COGNITIVE_API_KEY", None)\nval df: DataFrame = Seq(\n    "https://mmlspark.blob.core.windows.net/datasets/DSIR/test2.jpg"\n  ).toDF("url")\n\nval face = (new DetectFace()\n    .setSubscriptionKey(cognitiveKey)\n    .setLocation("eastus")\n    .setImageUrlCol("url")\n    .setOutputCol("face")\n    .setReturnFaceId(true)\n    .setReturnFaceLandmarks(true)\n    .setReturnFaceAttributes(Seq(\n      "age", "gender", "headPose", "smile", "facialHair", "glasses", "emotion",\n      "hair", "makeup", "occlusion", "accessories", "blur", "exposure", "noise")))\n\ndisplay(face.transform(df))\n')))),(0,o.kt)(i.Z,{className:"DetectFace",py:"mmlspark.cognitive.html#module-mmlspark.cognitive.DetectFace",scala:"com/microsoft/azure/synapse/ml/cognitive/DetectFace.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/Face.scala",mdxType:"DocTable"}),(0,o.kt)("h3",{id:"findsimilarface"},"FindSimilarFace"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ncognitiveKey = os.environ.get("COGNITIVE_API_KEY", getSecret("cognitive-api-key"))\ndf = spark.createDataFrame([\n  ("https://mmlspark.blob.core.windows.net/datasets/DSIR/test1.jpg",),\n  ("https://mmlspark.blob.core.windows.net/datasets/DSIR/test2.jpg",),\n  ("https://mmlspark.blob.core.windows.net/datasets/DSIR/test3.jpg",)\n], ["url"])\n\ndetector = (DetectFace()\n    .setSubscriptionKey(cognitiveKey)\n    .setLocation("eastus")\n    .setImageUrlCol("url")\n    .setOutputCol("detected_faces")\n    .setReturnFaceId(True)\n    .setReturnFaceLandmarks(False)\n    .setReturnFaceAttributes([]))\n\nfaceIdDF = detector.transform(df).select("detected_faces").select(col("detected_faces").getItem(0).getItem("faceId").alias("id"))\nfaceIds = [row.asDict()[\'id\'] for row in faceIdDF.collect()]\n\nfindSimilar = (FindSimilarFace()\n    .setSubscriptionKey(cognitiveKey)\n    .setLocation("eastus")\n    .setOutputCol("similar")\n    .setFaceIdCol("id")\n    .setFaceIds(faceIds))\n\ndisplay(findSimilar.transform(faceIdDF))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\n\nval cognitiveKey = sys.env.getOrElse("COGNITIVE_API_KEY", None)\nval df: DataFrame = Seq(\n    "https://mmlspark.blob.core.windows.net/datasets/DSIR/test1.jpg",\n    "https://mmlspark.blob.core.windows.net/datasets/DSIR/test2.jpg",\n    "https://mmlspark.blob.core.windows.net/datasets/DSIR/test3.jpg"\n  ).toDF("url")\nval detector = (new DetectFace()\n    .setSubscriptionKey(cognitiveKey)\n    .setLocation("eastus")\n    .setImageUrlCol("url")\n    .setOutputCol("detected_faces")\n    .setReturnFaceId(true)\n    .setReturnFaceLandmarks(false)\n    .setReturnFaceAttributes(Seq()))\n\nval faceIdDF = (detector.transform(df)\n    .select(col("detected_faces").getItem(0).getItem("faceId").alias("id"))\n    .cache())\nval faceIds = faceIdDF.collect().map(row => row.getAs[String]("id"))\n\nval findSimilar = (new FindSimilarFace()\n    .setSubscriptionKey(cognitiveKey)\n    .setLocation("eastus")\n    .setOutputCol("similar")\n    .setFaceIdCol("id")\n    .setFaceIds(faceIds))\n\ndisplay(findSimilar.transform(faceIdDF))\n')))),(0,o.kt)(i.Z,{className:"FindSimilarFace",py:"mmlspark.cognitive.html#module-mmlspark.cognitive.FindSimilarFace",scala:"com/microsoft/azure/synapse/ml/cognitive/FindSimilarFace.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/Face.scala",mdxType:"DocTable"}),(0,o.kt)("h3",{id:"groupfaces"},"GroupFaces"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ncognitiveKey = os.environ.get("COGNITIVE_API_KEY", getSecret("cognitive-api-key"))\ndf = spark.createDataFrame([\n  ("https://mmlspark.blob.core.windows.net/datasets/DSIR/test1.jpg",),\n  ("https://mmlspark.blob.core.windows.net/datasets/DSIR/test2.jpg",),\n  ("https://mmlspark.blob.core.windows.net/datasets/DSIR/test3.jpg",)\n], ["url"])\n\ndetector = (DetectFace()\n    .setSubscriptionKey(cognitiveKey)\n    .setLocation("eastus")\n    .setImageUrlCol("url")\n    .setOutputCol("detected_faces")\n    .setReturnFaceId(True)\n    .setReturnFaceLandmarks(False)\n    .setReturnFaceAttributes([]))\n\nfaceIdDF = detector.transform(df).select("detected_faces").select(col("detected_faces").getItem(0).getItem("faceId").alias("id"))\nfaceIds = [row.asDict()[\'id\'] for row in faceIdDF.collect()]\n\ngroup = (GroupFaces()\n    .setSubscriptionKey(cognitiveKey)\n    .setLocation("eastus")\n    .setOutputCol("grouping")\n    .setFaceIds(faceIds))\n\ndisplay(group.transform(faceIdDF))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\n\nval cognitiveKey = sys.env.getOrElse("COGNITIVE_API_KEY", None)\nval df: DataFrame = Seq(\n    "https://mmlspark.blob.core.windows.net/datasets/DSIR/test1.jpg",\n    "https://mmlspark.blob.core.windows.net/datasets/DSIR/test2.jpg",\n    "https://mmlspark.blob.core.windows.net/datasets/DSIR/test3.jpg"\n  ).toDF("url")\nval detector = (new DetectFace()\n    .setSubscriptionKey(cognitiveKey)\n    .setLocation("eastus")\n    .setImageUrlCol("url")\n    .setOutputCol("detected_faces")\n    .setReturnFaceId(true)\n    .setReturnFaceLandmarks(false)\n    .setReturnFaceAttributes(Seq()))\n\nval faceIdDF = (detector.transform(df)\n    .select(col("detected_faces").getItem(0).getItem("faceId").alias("id"))\n    .cache())\nval faceIds = faceIdDF.collect().map(row => row.getAs[String]("id"))\n\nval group = (new GroupFaces()\n    .setSubscriptionKey(cognitiveKey)\n    .setLocation("eastus")\n    .setOutputCol("grouping")\n    .setFaceIds(faceIds))\n\ndisplay(group.transform(faceIdDF))\n')))),(0,o.kt)(i.Z,{className:"GroupFaces",py:"mmlspark.cognitive.html#module-mmlspark.cognitive.GroupFaces",scala:"com/microsoft/azure/synapse/ml/cognitive/GroupFaces.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/Face.scala",mdxType:"DocTable"}),(0,o.kt)("h3",{id:"identifyfaces"},"IdentifyFaces"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ncognitiveKey = os.environ.get("COGNITIVE_API_KEY", getSecret("cognitive-api-key"))\npgId = "PUT_YOUR_PERSON_GROUP_ID"\n\nidentifyFaces = (IdentifyFaces()\n    .setSubscriptionKey(cognitiveKey)\n    .setLocation("eastus")\n    .setFaceIdsCol("faces")\n    .setPersonGroupId(pgId)\n    .setOutputCol("identified_faces"))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\n\nval cognitiveKey = sys.env.getOrElse("COGNITIVE_API_KEY", None)\nval pgId = "PUT_YOUR_PERSON_GROUP_ID"\n\nval identifyFaces = (new IdentifyFaces()\n    .setSubscriptionKey(cognitiveKey)\n    .setLocation("eastus")\n    .setFaceIdsCol("faces")\n    .setPersonGroupId(pgId)\n    .setOutputCol("identified_faces"))\n')))),(0,o.kt)(i.Z,{className:"IdentifyFaces",py:"mmlspark.cognitive.html#module-mmlspark.cognitive.IdentifyFaces",scala:"com/microsoft/azure/synapse/ml/cognitive/IdentifyFaces.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/Face.scala",mdxType:"DocTable"}),(0,o.kt)("h3",{id:"verifyfaces"},"VerifyFaces"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\ncognitiveKey = os.environ.get("COGNITIVE_API_KEY", getSecret("cognitive-api-key"))\ndf = spark.createDataFrame([\n  ("https://mmlspark.blob.core.windows.net/datasets/DSIR/test1.jpg",),\n  ("https://mmlspark.blob.core.windows.net/datasets/DSIR/test2.jpg",),\n  ("https://mmlspark.blob.core.windows.net/datasets/DSIR/test3.jpg",)\n], ["url"])\n\ndetector = (DetectFace()\n    .setSubscriptionKey(cognitiveKey)\n    .setLocation("eastus")\n    .setImageUrlCol("url")\n    .setOutputCol("detected_faces")\n    .setReturnFaceId(True)\n    .setReturnFaceLandmarks(False)\n    .setReturnFaceAttributes([]))\n\nfaceIdDF = detector.transform(df).select("detected_faces").select(col("detected_faces").getItem(0).getItem("faceId").alias("faceId1"))\nfaceIdDF2 = faceIdDF.withColumn("faceId2", lit(faceIdDF.take(1)[0].asDict()[\'faceId1\']))\n\nverify = (VerifyFaces()\n    .setSubscriptionKey(cognitiveKey)\n    .setLocation("eastus")\n    .setOutputCol("same")\n    .setFaceId1Col("faceId1")\n    .setFaceId2Col("faceId2"))\n\ndisplay(verify.transform(faceIdDF2))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\n\nval cognitiveKey = sys.env.getOrElse("COGNITIVE_API_KEY", None)\nval df: DataFrame = Seq(\n    "https://mmlspark.blob.core.windows.net/datasets/DSIR/test1.jpg",\n    "https://mmlspark.blob.core.windows.net/datasets/DSIR/test2.jpg",\n    "https://mmlspark.blob.core.windows.net/datasets/DSIR/test3.jpg"\n  ).toDF("url")\n\nval detector = (new DetectFace()\n    .setSubscriptionKey(cognitiveKey)\n    .setLocation("eastus")\n    .setImageUrlCol("url")\n    .setOutputCol("detected_faces")\n    .setReturnFaceId(true)\n    .setReturnFaceLandmarks(false)\n    .setReturnFaceAttributes(Seq()))\n\nval faceIdDF = (detector.transform(df)\n    .select(col("detected_faces").getItem(0).getItem("faceId").alias("faceId1"))\n    .cache())\nval faceIdDF2 = faceIdDF.withColumn("faceId2", lit(faceIdDF.take(1).head.getString(0)))\n\nval verify = (new VerifyFaces()\n    .setSubscriptionKey(cognitiveKey)\n    .setLocation("eastus")\n    .setOutputCol("same")\n    .setFaceId1Col("faceId1")\n    .setFaceId2Col("faceId2"))\n\ndisplay(verify.transform(faceIdDF2))\n')))),(0,o.kt)(i.Z,{className:"VerifyFaces",py:"mmlspark.cognitive.html#module-mmlspark.cognitive.VerifyFaces",scala:"com/microsoft/azure/synapse/ml/cognitive/VerifyFaces.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/Face.scala",mdxType:"DocTable"}))}z.isMDXComponent=!0;var Z=["components"],O=[{value:"Speech To Text",id:"speech-to-text",children:[{value:"SpeechToText",id:"speechtotext",children:[],level:3},{value:"SpeechToTextSDK",id:"speechtotextsdk",children:[],level:3}],level:2}],E={toc:O};function A(e){var t=e.components,a=(0,s.Z)(e,Z);return(0,o.kt)("wrapper",(0,n.Z)({},E,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"speech-to-text"},"Speech To Text"),(0,o.kt)("h3",{id:"speechtotext"},"SpeechToText"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\nimport requests\n\ncognitiveKey = os.environ.get("COGNITIVE_API_KEY", getSecret("cognitive-api-key"))\nlink = "https://mmlspark.blob.core.windows.net/datasets/Speech/audio2.wav"\naudioBytes = requests.get(link).content\ndf = spark.createDataFrame([(audioBytes,)\n                           ], ["audio"])\n\nstt = (SpeechToText()\n    .setSubscriptionKey(cognitiveKey)\n    .setLocation("eastus")\n    .setOutputCol("text")\n    .setAudioDataCol("audio")\n    .setLanguage("en-US")\n    .setFormat("simple"))\n\ndisplay(stt.transform(df))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\nimport org.apache.commons.compress.utils.IOUtils\nimport java.net.URL\n\nval cognitiveKey = sys.env.getOrElse("COGNITIVE_API_KEY", None)\nval audioBytes = IOUtils.toByteArray(new URL("https://mmlspark.blob.core.windows.net/datasets/Speech/test1.wav").openStream())\n\nval df: DataFrame = Seq(\n    Tuple1(audioBytes)\n  ).toDF("audio")\n\nval stt = (new SpeechToText()\n    .setSubscriptionKey(cognitiveKey)\n    .setLocation("eastus")\n    .setOutputCol("text")\n    .setAudioDataCol("audio")\n    .setLanguage("en-US")\n    .setFormat("simple"))\n\ndisplay(stt.transform(df))\n')))),(0,o.kt)(i.Z,{className:"SpeechToText",py:"synapse.ml.cognitive.html#module-synapse.ml.cognitive.SpeechToText",scala:"com/microsoft/azure/synapse/ml/cognitive/SpeechToText.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/SpeechToText.scala",mdxType:"DocTable"}),(0,o.kt)("h3",{id:"speechtotextsdk"},"SpeechToTextSDK"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\nimport requests\n\ncognitiveKey = os.environ.get("COGNITIVE_API_KEY", getSecret("cognitive-api-key"))\ndf = spark.createDataFrame([("https://mmlspark.blob.core.windows.net/datasets/Speech/audio2.wav",)\n                           ], ["url"])\n\nspeech_to_text = (SpeechToTextSDK()\n    .setSubscriptionKey(cognitiveKey)\n    .setLocation("eastus")\n    .setOutputCol("text")\n    .setAudioDataCol("url")\n    .setLanguage("en-US")\n    .setProfanity("Masked"))\n\ndisplay(speech_to_text.transform(df))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\nimport org.apache.commons.compress.utils.IOUtils\nimport java.net.URL\n\nval cognitiveKey = sys.env.getOrElse("COGNITIVE_API_KEY", None)\nval df: DataFrame = Seq(\n    "https://mmlspark.blob.core.windows.net/datasets/Speech/audio2.wav"\n  ).toDF("url")\n\nval speech_to_text = (new SpeechToTextSDK()\n    .setSubscriptionKey(cognitiveKey)\n    .setLocation("eastus")\n    .setOutputCol("text")\n    .setAudioDataCol("url")\n    .setLanguage("en-US")\n    .setProfanity("Masked"))\n\ndisplay(speech_to_text.transform(df))\n')))),(0,o.kt)(i.Z,{className:"SpeechToTextSDK",py:"synapse.ml.cognitive.html#module-synapse.ml.cognitive.SpeechToTextSDK",scala:"com/microsoft/azure/synapse/ml/cognitive/SpeechToTextSDK.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/SpeechToTextSDK.scala",mdxType:"DocTable"}))}A.isMDXComponent=!0;var F=["components"],R=[{value:"Azure Search",id:"azure-search",children:[{value:"AzureSearch",id:"azuresearch",children:[],level:3}],level:2}],P={toc:R};function V(e){var t=e.components,a=(0,s.Z)(e,F);return(0,o.kt)("wrapper",(0,n.Z)({},P,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"azure-search"},"Azure Search"),(0,o.kt)("h3",{id:"azuresearch"},"AzureSearch"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\nazureSearchKey = os.environ.get("AZURE_SEARCH_KEY", getSecret("azure-search-key"))\ntestServiceName = "mmlspark-azure-search"\n\nindexName = "test-website"\n\ndef createSimpleIndexJson(indexName):\n    json_str = """\n       {\n           "name": "%s",\n           "fields": [\n               {\n                   "name": "id",\n                   "type": "Edm.String",\n                   "key": true,\n                   "facetable": false\n                },\n                {\n                    "name": "fileName",\n                    "type": "Edm.String",\n                    "searchable": false,\n                    "sortable": false,\n                    "facetable": false\n                },\n                {\n                    "name": "text",\n                    "type": "Edm.String",\n                    "filterable": false,\n                    "sortable": false,\n                    "facetable": false\n                }\n            ]\n        }\n    """\n\n    return json_str % indexName\n\ndf = (spark.createDataFrame([\n    ("upload", "0", "file0", "text0"),\n    ("upload", "1", "file1", "text1"),\n    ("upload", "2", "file2", "text2"),\n    ("upload", "3", "file3", "text3")\n], ["searchAction", "id", "fileName", "text"]))\n\nad = (AddDocuments()\n      .setSubscriptionKey(azureSearchKey)\n      .setServiceName(testServiceName)\n      .setOutputCol("out")\n      .setErrorCol("err")\n      .setIndexName(indexName)\n      .setActionCol("searchAction"))\n\ndisplay(ad.transform(df))\n\nAzureSearchWriter.writeToAzureSearch(df,\n    subscriptionKey=azureSearchKey,\n    actionCol="searchAction",\n    serviceName=testServiceName,\n    indexJson=createSimpleIndexJson(indexName))\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\n\nval azureSearchKey = sys.env.getOrElse("AZURE_SEARCH_KEY", None)\nval testServiceName = "mmlspark-azure-search"\n\nval indexName = "test-website"\n\ndef createSimpleIndexJson(indexName: String) = {\n    s"""\n       |{\n       |    "name": "$indexName",\n       |    "fields": [\n       |      {\n       |        "name": "id",\n       |        "type": "Edm.String",\n       |        "key": true,\n       |        "facetable": false\n       |      },\n       |    {\n       |      "name": "fileName",\n       |      "type": "Edm.String",\n       |      "searchable": false,\n       |      "sortable": false,\n       |      "facetable": false\n       |    },\n       |    {\n       |      "name": "text",\n       |      "type": "Edm.String",\n       |      "filterable": false,\n       |      "sortable": false,\n       |      "facetable": false\n       |    }\n       |    ]\n       |  }\n    """.stripMargin\n}\n\nval df = ((0 until 4)\n      .map(i => ("upload", s"$i", s"file$i", s"text$i"))\n      .toDF("searchAction", "id", "fileName", "text"))\n\nval ad = (new AddDocuments()\n      .setSubscriptionKey(azureSearchKey)\n      .setServiceName(testServiceName)\n      .setOutputCol("out")\n      .setErrorCol("err")\n      .setIndexName(indexName)\n      .setActionCol("searchAction"))\n\ndisplay(ad.transform(df))\n\nAzureSearchWriter.write(df,\n      Map("subscriptionKey" -> azureSearchKey,\n        "actionCol" -> "searchAction",\n        "serviceName" -> testServiceName,\n        "indexJson" -> createSimpleIndexJson(indexName)))\n')))),(0,o.kt)(i.Z,{className:"AzureSearch",py:"synapse.ml.cognitive.html#module-synapse.ml.cognitive.AzureSearch",scala:"com/microsoft/azure/synapse/ml/cognitive/AzureSearch.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/AzureSearch.scala",mdxType:"DocTable"}))}V.isMDXComponent=!0;var M=["components"],G=[{value:"Bing Image Search",id:"bing-image-search",children:[{value:"BingImageSearch",id:"bingimagesearch",children:[],level:3}],level:2}],Y={toc:G};function j(e){var t=e.components,a=(0,s.Z)(e,M);return(0,o.kt)("wrapper",(0,n.Z)({},Y,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"bing-image-search"},"Bing Image Search"),(0,o.kt)("h3",{id:"bingimagesearch"},"BingImageSearch"),(0,o.kt)(l.Z,{defaultValue:"py",values:[{label:"Python",value:"py"},{label:"Scala",value:"scala"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"py",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from synapse.ml.cognitive import *\n\nbingSearchKey = os.environ.get("BING_SEARCH_KEY", getSecret("bing-search-key"))\n\n# Number of images Bing will return per query\nimgsPerBatch = 10\n# A list of offsets, used to page into the search results\noffsets = [(i*imgsPerBatch,) for i in range(100)]\n# Since web content is our data, we create a dataframe with options on that data: offsets\nbingParameters = spark.createDataFrame(offsets, ["offset"])\n\n# Run the Bing Image Search service with our text query\nbingSearch = (BingImageSearch()\n              .setSubscriptionKey(bingSearchKey)\n              .setOffsetCol("offset")\n              .setQuery("Martin Luther King Jr. quotes")\n              .setCount(imgsPerBatch)\n              .setOutputCol("images"))\n\n# Transformer that extracts and flattens the richly structured output of Bing Image Search into a simple URL column\ngetUrls = BingImageSearch.getUrlTransformer("images", "url")\n\n# This displays the full results returned\ndisplay(bingSearch.transform(bingParameters))\n\n# Since we have two services, they are put into a pipeline\npipeline = PipelineModel(stages=[bingSearch, getUrls])\n\n# Show the results of your search: image URLs\ndisplay(pipeline.transform(bingParameters))\n\n'))),(0,o.kt)(r.Z,{value:"scala",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import com.microsoft.azure.synapse.ml.cognitive._\nimport spark.implicits._\n\nval bingSearchKey = sys.env.getOrElse("BING_SEARCH_KEY", None)\n\n// Number of images Bing will return per query\nval imgsPerBatch = 10\n// A list of offsets, used to page into the search results\nval offsets = (0 until 100).map(i => i*imgsPerBatch)\n// Since web content is our data, we create a dataframe with options on that data: offsets\nval bingParameters = Seq(offsets).toDF("offset")\n\n// Run the Bing Image Search service with our text query\nval bingSearch = (new BingImageSearch()\n              .setSubscriptionKey(bingSearchKey)\n              .setOffsetCol("offset")\n              .setQuery("Martin Luther King Jr. quotes")\n              .setCount(imgsPerBatch)\n              .setOutputCol("images"))\n\n// Transformer that extracts and flattens the richly structured output of Bing Image Search into a simple URL column\nval getUrls = BingImageSearch.getUrlTransformer("images", "url")\n\n// This displays the full results returned\ndisplay(bingSearch.transform(bingParameters))\n\n// Show the results of your search: image URLs\ndisplay(getUrls.transform(bingSearch.transform(bingParameters)))\n')))),(0,o.kt)(i.Z,{className:"BingImageSearch",py:"synapse.ml.cognitive.html#module-synapse.ml.cognitive.BingImageSearch",scala:"com/microsoft/azure/synapse/ml/cognitive/BingImageSearch.html",sourceLink:"https://github.com/microsoft/SynapseML/blob/master/cognitive/src/main/scala/com/microsoft/azure/synapse/ml/cognitive/BingImageSearch.scala",mdxType:"DocTable"}))}j.isMDXComponent=!0;var U=["components"],B={title:"Transformers - Cognitive",sidebar_label:"Cognitive",hide_title:!0},q=void 0,H={unversionedId:"documentation/transformers/transformers_cognitive",id:"documentation/transformers/transformers_cognitive",isDocsHomePage:!1,title:"Transformers - Cognitive",description:"export const toc = [...TextAnalyticsTOC, ...TranslatorTOC, ...ComputerVisionTOC,",source:"@site/docs/documentation/transformers/transformers_cognitive.md",sourceDirName:"documentation/transformers",slug:"/documentation/transformers/transformers_cognitive",permalink:"/SynapseML/docs/next/documentation/transformers/transformers_cognitive",tags:[],version:"current",frontMatter:{title:"Transformers - Cognitive",sidebar_label:"Cognitive",hide_title:!0},sidebar:"docs",previous:{title:"TextAnalytics - Amazon Book Reviews",permalink:"/SynapseML/docs/next/examples/text_analytics/TextAnalytics - Amazon Book Reviews"},next:{title:"Core",permalink:"/SynapseML/docs/next/documentation/transformers/transformers_core"}},X=[].concat(m,d,b,I,N,L,O,R,G),J={toc:X};function W(e){var t=e.components,a=(0,s.Z)(e,U);return(0,o.kt)("wrapper",(0,n.Z)({},J,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)(u,{mdxType:"TextAnalytics"}),(0,o.kt)(v,{mdxType:"Translator"}),(0,o.kt)(T,{mdxType:"ComputerVision"}),(0,o.kt)(C,{mdxType:"FormRecognizer"}),(0,o.kt)(K,{mdxType:"AnomalyDetection"}),(0,o.kt)(z,{mdxType:"Face"}),(0,o.kt)(A,{mdxType:"SpeechToText"}),(0,o.kt)(V,{mdxType:"AzureSearch"}),(0,o.kt)(j,{mdxType:"BingImageSearch"}))}W.isMDXComponent=!0}}]);