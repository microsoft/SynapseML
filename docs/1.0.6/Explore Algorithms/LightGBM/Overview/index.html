<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-1.0.6 plugin-docs plugin-id-default docs-doc-id-Explore Algorithms/LightGBM/Overview">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Overview | SynapseML</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://microsoft.github.io/SynapseML/img/synapseml_og.jpg"><meta data-rh="true" name="twitter:image" content="https://microsoft.github.io/SynapseML/img/synapseml_og.jpg"><meta data-rh="true" property="og:url" content="https://microsoft.github.io/SynapseML/docs/1.0.6/Explore Algorithms/LightGBM/Overview/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="1.0.6"><meta data-rh="true" name="docusaurus_tag" content="docs-default-1.0.6"><meta data-rh="true" name="docsearch:version" content="1.0.6"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-1.0.6"><meta data-rh="true" property="og:title" content="Overview | SynapseML"><meta data-rh="true" name="description" content="LightGBM"><meta data-rh="true" property="og:description" content="LightGBM"><link data-rh="true" rel="icon" href="/SynapseML/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://microsoft.github.io/SynapseML/docs/1.0.6/Explore Algorithms/LightGBM/Overview/"><link data-rh="true" rel="alternate" href="https://microsoft.github.io/SynapseML/docs/1.0.6/Explore Algorithms/LightGBM/Overview/" hreflang="en"><link data-rh="true" rel="alternate" href="https://microsoft.github.io/SynapseML/docs/1.0.6/Explore Algorithms/LightGBM/Overview/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://GBW8AA15RD-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/SynapseML/blog/rss.xml" title="SynapseML RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/SynapseML/blog/atom.xml" title="SynapseML Atom Feed">
<link rel="alternate" type="application/json" href="/SynapseML/blog/feed.json" title="SynapseML JSON Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RWPE0183E8"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-RWPE0183E8",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="SynapseML" href="/SynapseML/opensearch.xml">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"><link rel="stylesheet" href="/SynapseML/assets/css/styles.2c553299.css">
<link rel="preload" href="/SynapseML/assets/js/runtime~main.39fa20ec.js" as="script">
<link rel="preload" href="/SynapseML/assets/js/main.111b436d.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">⭐️ If you like SynapseML, consider giving it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/Microsoft/SynapseML">GitHub</a> ⭐</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/SynapseML/"><div class="navbar__logo"><img src="/SynapseML/img/logo.svg" alt="SynapseML Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/SynapseML/img/logo.svg" alt="SynapseML Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">SynapseML</b></a><a class="navbar__item navbar__link" href="/SynapseML/docs/Overview/">Docs</a><a class="navbar__item navbar__link" href="/SynapseML/blog/">Blog</a><a class="navbar__item navbar__link" href="/SynapseML/videos/">Videos</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/SynapseML/docs/1.0.6/Overview/">1.0.6</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/SynapseML/docs/next/Explore Algorithms/LightGBM/Overview/">Next</a></li><li><a class="dropdown__link" href="/SynapseML/docs/Explore Algorithms/LightGBM/Overview/">1.0.8</a></li><li><a class="dropdown__link" href="/SynapseML/docs/1.0.7/Explore Algorithms/LightGBM/Overview/">1.0.7</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/SynapseML/docs/1.0.6/Explore Algorithms/LightGBM/Overview/">1.0.6</a></li><li><a class="dropdown__link" href="/SynapseML/docs/1.0.5/Explore Algorithms/LightGBM/Overview/">1.0.5</a></li><li><a class="dropdown__link" href="/SynapseML/docs/1.0.4/Explore Algorithms/LightGBM/Overview/">1.0.4</a></li><li><a class="dropdown__link" href="/SynapseML/docs/1.0.3/Explore Algorithms/LightGBM/Overview/">1.0.3</a></li><li><a class="dropdown__link" href="/SynapseML/docs/1.0.2/Explore Algorithms/LightGBM/Overview/">1.0.2</a></li><li><a class="dropdown__link" href="/SynapseML/docs/1.0.1/Explore Algorithms/LightGBM/Overview/">1.0.1</a></li><li><a class="dropdown__link" href="/SynapseML/docs/0.11.4/Explore Algorithms/LightGBM/Overview/">0.11.4</a></li><li><a class="dropdown__link" href="/SynapseML/docs/0.11.3/Explore Algorithms/LightGBM/Overview/">0.11.3</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/SynapseML/docs/1.0.6/Explore Algorithms/LightGBM/Overview/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Developer Docs</a><ul class="dropdown__menu"><li><a href="https://mmlspark.blob.core.windows.net/docs/1.0.8/pyspark/index.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Python<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://mmlspark.blob.core.windows.net/docs/1.0.8/scala/com/microsoft/azure/synapse/ml/index.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Scala<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://github.com/microsoft/SynapseML" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/SynapseML/docs/1.0.6/Overview/">What is SynapseML?</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/SynapseML/docs/1.0.6/Get Started/Create a Spark Cluster/">Get Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/SynapseML/docs/1.0.6/Explore Algorithms/LightGBM/Overview/">Explore Algorithms</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/SynapseML/docs/1.0.6/Explore Algorithms/LightGBM/Overview/">LightGBM</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/SynapseML/docs/1.0.6/Explore Algorithms/LightGBM/Overview/">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/SynapseML/docs/1.0.6/Explore Algorithms/LightGBM/Quickstart - Classification, Ranking, and Regression/">Quickstart - Classification, Ranking, and Regression</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/SynapseML/docs/1.0.6/Explore Algorithms/AI Services/Overview/">AI Services</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/SynapseML/docs/1.0.6/Explore Algorithms/OpenAI/Langchain/">OpenAI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/SynapseML/docs/1.0.6/Explore Algorithms/Deep Learning/Getting Started/">Deep Learning</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/SynapseML/docs/1.0.6/Explore Algorithms/Responsible AI/Interpreting Model Predictions/">Responsible AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/SynapseML/docs/1.0.6/Explore Algorithms/Causal Inference/Overview/">Causal Inference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/SynapseML/docs/1.0.6/Explore Algorithms/Classification/Quickstart - Train Classifier/">Classification</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/SynapseML/docs/1.0.6/Explore Algorithms/Regression/Quickstart - Data Cleaning/">Regression</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/SynapseML/docs/1.0.6/Explore Algorithms/Anomaly Detection/Quickstart - Isolation Forests/">Anomaly Detection</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/SynapseML/docs/1.0.6/Explore Algorithms/Hyperparameter Tuning/HyperOpt/">Hyperparameter Tuning</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/SynapseML/docs/1.0.6/Explore Algorithms/OpenCV/Image Transformations/">OpenCV</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/SynapseML/docs/1.0.6/Explore Algorithms/Vowpal Wabbit/Overview/">Vowpal Wabbit</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/SynapseML/docs/1.0.6/Explore Algorithms/Other Algorithms/Smart Adaptive Recommendations/">Other Algorithms</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/SynapseML/docs/1.0.6/Use with MLFlow/Overview/">Use with MLFlow</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/SynapseML/docs/1.0.6/Deploy Models/Overview/">Deploy Models</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/SynapseML/docs/1.0.6/Reference/Contributor Guide/">Reference</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->SynapseML<!-- --> <b>1.0.6</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/SynapseML/docs/Explore Algorithms/LightGBM/Overview/">latest version</a></b> (<!-- -->1.0.8<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/SynapseML/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Explore Algorithms</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">LightGBM</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Overview</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 1.0.6</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>LightGBM on Apache Spark</h1><h3 class="anchor anchorWithStickyNavbar_LWe7" id="lightgbm">LightGBM<a href="#lightgbm" class="hash-link" aria-label="Direct link to LightGBM" title="Direct link to LightGBM">​</a></h3><p><a href="https://github.com/Microsoft/LightGBM" target="_blank" rel="noopener noreferrer">LightGBM</a> is an open-source,
distributed, high-performance gradient boosting (GBDT, GBRT, GBM, or
MART) framework. This framework specializes in creating high-quality and
GPU enabled decision tree algorithms for ranking, classification, and
many other machine learning tasks. LightGBM is part of Microsoft&#x27;s
<a href="http://github.com/microsoft/dmtk" target="_blank" rel="noopener noreferrer">DMTK</a> project.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="advantages-of-lightgbm-through-synapseml">Advantages of LightGBM through SynapseML<a href="#advantages-of-lightgbm-through-synapseml" class="hash-link" aria-label="Direct link to Advantages of LightGBM through SynapseML" title="Direct link to Advantages of LightGBM through SynapseML">​</a></h3><ul><li><strong>Composability</strong>: LightGBM models can be incorporated into existing
SparkML Pipelines, and used for batch, streaming, and serving
workloads.</li><li><strong>Performance</strong>: LightGBM on Spark is 10-30% faster than SparkML on
the Higgs dataset, and achieves a 15% increase in AUC.  <a href="https://github.com/Microsoft/LightGBM/blob/master/docs/Experiments.rst#parallel-experiment" target="_blank" rel="noopener noreferrer">Parallel
experiments</a>
have verified that LightGBM can achieve a linear speed-up by using
multiple machines for training in specific settings.</li><li><strong>Functionality</strong>: LightGBM offers a wide array of <a href="https://github.com/Microsoft/LightGBM/blob/master/docs/Parameters.rst" target="_blank" rel="noopener noreferrer">tunable
parameters</a>,
that one can use to customize their decision tree system. LightGBM on
Spark also supports new types of problems such as quantile regression.</li><li><strong>Cross platform</strong> LightGBM on Spark is available on Spark, PySpark, and SparklyR</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="usage">Usage<a href="#usage" class="hash-link" aria-label="Direct link to Usage" title="Direct link to Usage">​</a></h3><p>In PySpark, you can run the <code>LightGBMClassifier</code> via:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword">from</span><span class="token plain"> synapse</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">ml</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">lightgbm </span><span class="token keyword">import</span><span class="token plain"> LightGBMClassifier</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">model </span><span class="token operator">=</span><span class="token plain"> LightGBMClassifier</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">learningRate</span><span class="token operator">=</span><span class="token number" style="color:rgb(174, 129, 255)">0.3</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                           numIterations</span><span class="token operator">=</span><span class="token number" style="color:rgb(174, 129, 255)">100</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                           numLeaves</span><span class="token operator">=</span><span class="token number" style="color:rgb(174, 129, 255)">31</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">fit</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">train</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Similarly, you can run the <code>LightGBMRegressor</code> by setting the
<code>application</code> and <code>alpha</code> parameters:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword">from</span><span class="token plain"> synapse</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">ml</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">lightgbm </span><span class="token keyword">import</span><span class="token plain"> LightGBMRegressor</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">model </span><span class="token operator">=</span><span class="token plain"> LightGBMRegressor</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">application</span><span class="token operator">=</span><span class="token string" style="color:rgb(230, 219, 116)">&#x27;quantile&#x27;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                          alpha</span><span class="token operator">=</span><span class="token number" style="color:rgb(174, 129, 255)">0.3</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                          learningRate</span><span class="token operator">=</span><span class="token number" style="color:rgb(174, 129, 255)">0.3</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                          numIterations</span><span class="token operator">=</span><span class="token number" style="color:rgb(174, 129, 255)">100</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                          numLeaves</span><span class="token operator">=</span><span class="token number" style="color:rgb(174, 129, 255)">31</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">fit</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">train</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For an end to end application, check out the LightGBM <a href="/SynapseML/docs/1.0.6/Explore Algorithms/LightGBM/Quickstart - Classification, Ranking, and Regression/">notebook
example</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="argumentsparameters">Arguments/Parameters<a href="#argumentsparameters" class="hash-link" aria-label="Direct link to Arguments/Parameters" title="Direct link to Arguments/Parameters">​</a></h3><p>SynapseML exposes getters/setters for many common LightGBM parameters.
In python, you can use property-value pairs, or in Scala use
fluent setters. Examples of both are shown in this section.</p><div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">import com.microsoft.azure.synapse.ml.lightgbm.LightGBMClassifier</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">val classifier = new LightGBMClassifier()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                       .setLearningRate(0.2)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                       .setNumLeaves(50)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>LightGBM has far more parameters than SynapseML exposes. For cases where you
need to set some parameters that SynapseML doesn&#x27;t expose a setter for, use
passThroughArgs. This argument is just a free string that you can use to add extra parameters
to the command SynapseML sends to configure LightGBM.</p><p>In python:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword">from</span><span class="token plain"> synapse</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">ml</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">lightgbm </span><span class="token keyword">import</span><span class="token plain"> LightGBMClassifier</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">model </span><span class="token operator">=</span><span class="token plain"> LightGBMClassifier</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">passThroughArgs</span><span class="token operator">=</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;force_row_wise=true min_sum_hessian_in_leaf=2e-3&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                           numIterations</span><span class="token operator">=</span><span class="token number" style="color:rgb(174, 129, 255)">100</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                           numLeaves</span><span class="token operator">=</span><span class="token number" style="color:rgb(174, 129, 255)">31</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">fit</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">train</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In Scala:</p><div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">import com.microsoft.azure.synapse.ml.lightgbm.LightGBMClassifier</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">val classifier = new LightGBMClassifier()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                      .setPassThroughArgs(&quot;force_row_wise=true min_sum_hessian_in_leaf=2e-3&quot;)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                      .setLearningRate(0.2)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                      .setNumLeaves(50)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For formatting options and specific argument documentation, see
<a href="https://lightgbm.readthedocs.io/en/v3.3.2/Parameters.html" target="_blank" rel="noopener noreferrer">LightGBM docs</a>. SynapseML sets some
parameters specifically for the Spark distributed environment and
shouldn&#x27;t be changed. Some parameters are for CLI mode only, and don&#x27;t work within
Spark. </p><p>You can mix <em>passThroughArgs</em> and explicit args, as shown in the example. SynapseML
merges them to create one argument string to send to LightGBM. If you set a parameter in
both places, <em>passThroughArgs</em> takes precedence.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="architecture">Architecture<a href="#architecture" class="hash-link" aria-label="Direct link to Architecture" title="Direct link to Architecture">​</a></h3><p>LightGBM on Spark uses the Simple Wrapper and Interface Generator (SWIG)
to add Java support for LightGBM. These Java Binding use the Java Native
Interface call into the <a href="https://github.com/Microsoft/LightGBM/blob/master/include/LightGBM/c_api.h" target="_blank" rel="noopener noreferrer">distributed C++
API</a>.</p><p>We initialize LightGBM by calling
<a href="https://github.com/Microsoft/LightGBM/blob/master/include/LightGBM/c_api.h" target="_blank" rel="noopener noreferrer"><code>LGBM_NetworkInit</code></a>
with the Spark executors within a MapPartitions call. We then pass each
workers partitions into LightGBM to create the in-memory distributed
dataset for LightGBM.  We can then train LightGBM to produce a model
that can then be used for inference.</p><p>The <code>LightGBMClassifier</code> and <code>LightGBMRegressor</code> use the SparkML API,
inherit from the same base classes, integrate with SparkML pipelines,
and can be tuned with <a href="https://spark.apache.org/docs/latest/ml-tuning.html" target="_blank" rel="noopener noreferrer">SparkML&#x27;s cross
validators</a>.</p><p>Models built can be saved as SparkML pipeline with native LightGBM model
using <code>saveNativeModel()</code>. Additionally, they&#x27;re fully compatible with <a href="https://en.wikipedia.org/wiki/Predictive_Model_Markup_Language" target="_blank" rel="noopener noreferrer">PMML</a> and
can be converted to PMML format through the
<a href="https://github.com/alipay/jpmml-sparkml-lightgbm" target="_blank" rel="noopener noreferrer">JPMML-SparkML-LightGBM</a> plugin.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="dynamic-allocation-limitations">Dynamic Allocation Limitations<a href="#dynamic-allocation-limitations" class="hash-link" aria-label="Direct link to Dynamic Allocation Limitations" title="Direct link to Dynamic Allocation Limitations">​</a></h4><p>The native LightGBM library has a <em>distributed mode</em> that allows the algorithm to work over multiple <em>machines</em>. SynapseML
uses this mode to call LightGBM from Spark. SynapseML first gathers all the Spark executor networking information, passes that to LightGBM, and then
waits for LightGBM to complete its work. However, the native LightGBM algorithm implementation assumes all networking is constant over the time period of a single
training or scoring session. The native LightGBM distributed mode was designed this way and isn&#x27;t a limitation of SynapseML by itself.</p><p>Dynamic compute changes can cause LightGBM problems if the Spark executors change during data processing. Spark can naturally
take advantage of cluster autoscaling and can also dynamically replace any failed executor with another, but LightGBM can&#x27;t
handle these networking changes. Large datasets are affected in particular since they&#x27;re more likely to cause executor scaling
or have a single executor fail during a single processing pass.</p><p>If you&#x27;re experiencing problems with LightGBM as exposed through SynapseML due to executor changes (for example, occasional Task failures or networking hangs),
there are several options.</p><ol><li>In the Spark platform, turn off any autoscaling on the cluster you have provisioned.</li><li>Set <em>numTasks</em> manually to be smaller so that fewer executors are used (reducing probability of single executor failure).</li><li>Turn off dynamic executor scaling with configuration in a notebook cell. In Synapse and Fabric, you can use:</li></ol><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">   </span><span class="token operator">%</span><span class="token operator">%</span><span class="token plain">configure</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(249, 38, 114)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">       </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;conf&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">       </span><span class="token punctuation" style="color:rgb(249, 38, 114)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">           </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;spark.dynamicAllocation.enabled&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;false&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">       </span><span class="token punctuation" style="color:rgb(249, 38, 114)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(249, 38, 114)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note: setting any custom configuration can affect cluster startup time if your compute platform takes advantage of &quot;live pools&quot;
to improve notebook performance.</p><p>If you still have problems, you can consider splitting your data into smaller segments using <em>numBatches</em>. Splitting into multiple
batches increases total processing time, but can potentially be used to increase reliability.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-transfer-mode">Data Transfer Mode<a href="#data-transfer-mode" class="hash-link" aria-label="Direct link to Data Transfer Mode" title="Direct link to Data Transfer Mode">​</a></h3><p>SynapseML must pass data from Spark partitions to LightGBM native Datasets before turning over control to
the actual LightGBM execution code for training and inference. SynapseML has two modes
that control how this data is transferred: <em>streaming</em> and <em>bulk</em>.
This mode doesn&#x27;t affect training but can affect memory usage and overall fit/transform time.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="bulk-execution-mode">Bulk Execution mode<a href="#bulk-execution-mode" class="hash-link" aria-label="Direct link to Bulk Execution mode" title="Direct link to Bulk Execution mode">​</a></h4><p>The &quot;Bulk&quot; mode is older and requires accumulating all data in executor memory before creating Datasets. This mode can cause
OOM errors for large data, especially since the data must be accumulated in its original uncompressed double-format size.
For now, &quot;bulk&quot; mode is the default since &quot;streaming&quot; is new, but SynapseML will eventually make streaming the default.</p><p>For bulk mode, native LightGBM Datasets can either be created per partition (useSingleDatasetMode=false), or
per executor (useSingleDatasetMode=true). Generally, one Dataset per executor is more efficient since it reduces LightGBM network size and complexity during training or fitting. It also avoids using slow network protocols on partitions
that are actually on the same executor node.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="streaming-execution-mode">Streaming Execution Mode<a href="#streaming-execution-mode" class="hash-link" aria-label="Direct link to Streaming Execution Mode" title="Direct link to Streaming Execution Mode">​</a></h4><p>The &quot;streaming&quot; execution mode uses new native LightGBM APIs created just for SynapseML that don&#x27;t require loading extra copies of the data into memory. In particular, data is passed directly
from partitions to Datasets in small &quot;micro-batches&quot;, similar to Spark streaming. The <code>microBatchSize</code> parameter controls the size of these micro-batches.
Smaller micro-batch sizes reduce memory overhead, but larger sizes avoid overhead from repeatedly transferring data to the native layer. The default
100, uses far less memory than bulk mode since only 100 rows of data will be loaded at a time. If your dataset has
few columns, you can increase the batch size. Alternatively, if
your dataset has a large number of columns you can decrease the micro-batch size to avoid OOM issues.</p><p>These new streaming APIs in LightGBM are thread-safe, and allow all partitions in the same executor
to push data into a shared Dataset in parallel. Because of this, streaming mode always uses the more efficient
&quot;useSingleDatasetMode=true&quot;, creating only one Dataset per executor.</p><p>You can explicitly specify Execution Mode and MicroBatch size as parameters.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">val lgbm = new LightGBMClassifier()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    .setExecutionMode(&quot;streaming&quot;)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    .setMicroBatchSize(100)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    .setLabelCol(labelColumn)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    .setObjective(&quot;binary&quot;)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">&lt;train classifier&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For streaming mode, only one Dataset is created per partition, so <em>useSingleDataMode</em> has no effect. It&#x27;s effectively always true.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-sampling">Data Sampling<a href="#data-sampling" class="hash-link" aria-label="Direct link to Data Sampling" title="Direct link to Data Sampling">​</a></h3><p>In order for LightGBM algorithm to work, it must first create a set of bin boundaries for optimization. It does this calculation by
first sampling the data before any training or inferencing starts. (<a href="https://github.com/Microsoft/LightGBM" target="_blank" rel="noopener noreferrer">LightGBM docs</a>). The number of
samples to use is set using <em>binSampleCount</em>, which must be a minimal percent of the data or LightGBM rejects it.</p><p>For <em>bulk</em> mode, this sampling is automatically done over the entire data, and each executor uses its own partitions to calculate samples for only
a subset of the features. This distributed sampling can have subtle effects since partitioning can affect the calculated bins.
Also, all data is sampled no matter what.</p><p>For <em>streaming</em> mode, there are more explicit user controls for this sampling, and it&#x27;s all done from the driver.
The <em>samplingMode</em> property controls the behavior. The efficiency of these methods increases from first to last.</p><ul><li><em>global</em> - Like bulk mode, the random sample is calculated by iterating over entire data (hence data is traversed twice)</li><li><em>subset</em> - (default) Samples only from the first <em>samplingSubsetSize</em> elements. Assumes this subset is representative.</li><li><em>fixed</em> - There&#x27;s no random sample. The first <em>binSampleSize</em> rows are used. Assumes randomized data.
For large row counts, <em>subset</em> and <em>fixed</em> modes can save a first iteration over the entire data.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="reference-dataset">Reference Dataset<a href="#reference-dataset" class="hash-link" aria-label="Direct link to Reference Dataset" title="Direct link to Reference Dataset">​</a></h4><p>The sampling of the data to calculate bin boundaries happens every <em>fit</em> call.
If repeating a fit many times (for example, hyperparameter tuning), this calculation is duplicated effort.</p><p>For <em>streaming</em> mode, there&#x27;s an optimization that a client can set to use the previously calculated bin boundaries. The
sampling calculation results in a <em>reference dataset</em>, which can be reused. After a fit, there will be a <em>referenceDataset</em> property
on the estimator that was calculated and used for that fit. If that is set on the next estimator (or you reuse the same one),
it will use that instead of resampling the data.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword">from</span><span class="token plain"> synapse</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">ml</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">lightgbm </span><span class="token keyword">import</span><span class="token plain"> LightGBMClassifier</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">classifier </span><span class="token operator">=</span><span class="token plain"> LightGBMClassifier</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">learningRate</span><span class="token operator">=</span><span class="token number" style="color:rgb(174, 129, 255)">0.3</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                                numIterations</span><span class="token operator">=</span><span class="token number" style="color:rgb(174, 129, 255)">100</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                                numLeaves</span><span class="token operator">=</span><span class="token number" style="color:rgb(174, 129, 255)">31</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">model1 </span><span class="token operator">=</span><span class="token plain"> classifier</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">fit</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">train</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">classifier</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">learningRate </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(174, 129, 255)">0.4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">model2 </span><span class="token operator">=</span><span class="token plain"> classifier</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">fit</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">train</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The &#x27;model2&#x27; call to &#x27;fit&#x27; doesn&#x27;t resample the data and uses the same bin boundaries as &#x27;model1&#x27;.</p><p><em>Caution</em>: Some parameters actually affect the bin boundary calculation and require the use of a new reference dataset every time.
These parameters include <em>isEnableSparse</em>, <em>useMissing</em>, and <em>zeroAsMissing</em> that you can set from SynapseML. If you manually set
some parameters with <em>passThroughArgs</em>, you should look at LightGBM docs to see if they affect bin boundaries. If you&#x27;re setting
any parameter that affects bin boundaries and reusing the same estimator, you should set referenceDataset to an empty array between calls.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="barrier-execution-mode">Barrier Execution Mode<a href="#barrier-execution-mode" class="hash-link" aria-label="Direct link to Barrier Execution Mode" title="Direct link to Barrier Execution Mode">​</a></h3><p>By default LightGBM uses the regular spark paradigm for launching tasks and communicates with the driver to coordinate task execution.
The driver thread aggregates all task host:port information and then communicates the full list back to the workers in order for NetworkInit to be called.
This procedure requires the driver to know how many tasks there are, and a mismatch between the expected number of tasks and the actual number causes
the initialization to deadlock.</p><p>If you&#x27;re experiencing network issues, you can try using Spark&#x27;s <em>barrier</em> execution mode. SynapseML provides a <code>UseBarrierExecutionMode</code> flag,
to use Apache Spark&#x27;s <code>barrier()</code> stage to ensure all tasks execute at the same time.
Barrier execution mode changes the logic to aggregate <code>host:port</code> information across all tasks in a synchronized way.
To use it in scala, you can call setUseBarrierExecutionMode(true), for example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">val lgbm = new LightGBMClassifier()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    .setLabelCol(labelColumn)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    .setObjective(binaryObjective)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    .setUseBarrierExecutionMode(true)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">&lt;train classifier&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note: barrier execution mode can also cause complicated issues, so use it only if needed.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/SynapseML/docs/1.0.6/Get Started/Quickstart - Your First Models/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Quickstart - Your First Models</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/SynapseML/docs/1.0.6/Explore Algorithms/LightGBM/Quickstart - Classification, Ranking, and Regression/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Quickstart - Classification, Ranking, and Regression</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#lightgbm" class="table-of-contents__link toc-highlight">LightGBM</a></li><li><a href="#advantages-of-lightgbm-through-synapseml" class="table-of-contents__link toc-highlight">Advantages of LightGBM through SynapseML</a></li><li><a href="#usage" class="table-of-contents__link toc-highlight">Usage</a></li><li><a href="#argumentsparameters" class="table-of-contents__link toc-highlight">Arguments/Parameters</a></li><li><a href="#architecture" class="table-of-contents__link toc-highlight">Architecture</a></li><li><a href="#data-transfer-mode" class="table-of-contents__link toc-highlight">Data Transfer Mode</a></li><li><a href="#data-sampling" class="table-of-contents__link toc-highlight">Data Sampling</a></li><li><a href="#barrier-execution-mode" class="table-of-contents__link toc-highlight">Barrier Execution Mode</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/SynapseML/docs/Get Started/Install SynapseML/">Installation</a></li><li class="footer__item"><a class="footer__link-item" href="/SynapseML/docs/Get Started/Quickstart - Your First Models/">Getting Started</a></li><li class="footer__item"><a href="https://mmlspark.blob.core.windows.net/docs/1.0.8/pyspark/index.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Python API Reference</a></li><li class="footer__item"><a href="https://mmlspark.blob.core.windows.net/docs/1.0.8/scala/index.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Scala API Reference</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/SynapseML/blog/">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/SynapseML/videos/">Videos</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/microsoft/SynapseML" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Microsoft.</div></div></div></footer></div>
<script src="/SynapseML/assets/js/runtime~main.39fa20ec.js"></script>
<script src="/SynapseML/assets/js/main.111b436d.js"></script>
</body>
</html>